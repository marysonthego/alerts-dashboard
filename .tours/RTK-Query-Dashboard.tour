{
  "$schema": "https://aka.ms/codetour-schema",
  "title": "RTK Query with Alert-Dashboard",
  "steps": [
    {
      "title": "How I use RTK Query",
      "description": "# RTK Query\r\n- ### Fetches data from the server\r\n- ### Caches data Client-side in Redux store \r\n- ### API endpoints include how to generate query parameters from arguments and transform responses for caching\r\n- ### Generates react hooks that encapsulate fetching and manage the lifetime of cached data as components mount and unmount\r\n- ### Allows streaming cache updates via websocket messages after fetching initial data (not implemented here)\r\n\r\n## createApi()\r\n- ### You need one per app. One API slice per base URL.\r\n- ### Defines sets of database endpoints.\r\n- ### Describes how to retrieve data from an endpoint series.\r\n- ### Configures how to fetch and transform data.\r\n\r\n## fetchBaseQuery()\r\n- ### A small `fetch` wrapper that simplifies requests.\r\n\r\n"
    },
    {
      "file": "dashboard/src/app/redux/apiSlice.js",
      "description": "## Create file: apiSlice.js\r\n- ### import createApi and fetchBaseQuery\r\n\r\n```\r\nimport { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\r\n```",
      "line": 1,
      "selection": {
        "start": {
          "line": 1,
          "character": 1
        },
        "end": {
          "line": 1,
          "character": 74
        }
      },
      "contents": "import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\r\n//import { baseUrl } from 'app/baseUrl';\r\n//const Origin = 'http://localhost:3002'; //CORS Origin must be in server's whitelist\r\n\r\nexport const apiSlice = createApi({\r\n  reducerPath: 'apiSlice',  //all data will be in Redux store at store.apiSlice\r\n  //baseQuery: fetchBaseQuery({ baseUrl: \"http://localhost:4000/api\" }),tagTypes: ['User', 'Locations', 'Friends', 'Customers'],\r\n  //keepUnusedDataFor: 5,\r\n  \r\n  baseQuery: fetchBaseQuery({ baseUrl: \"/api\" }),tagTypes: ['User', 'Locations', 'Friends', 'Customers'],\r\n  keepUnusedDataFor: 5,\r\n  \r\n  //baseQuery: fetchBaseQuery( '${baseUrl}/api' ),tagTypes: ['User', 'Locations', 'Friends', 'Customers'],\r\n  //endpoints are calls to the Postgres server\r\n  endpoints: builder => ({\r\n\r\n    listCustomers: builder.query({\r\n      //query is a call to '${baseUrl}/listcustomers'\r\n      query: () => ({\r\n      url: '/listcustomers',\r\n      //Origin: Origin,\r\n      providesTags: ['Customers'],\r\n      }),\r\n    }),\r\n\r\n    getCustomerByCustid: builder.query({\r\n      query: custid => ({\r\n          url: `/getcustomerbycustid/${custid}`,\r\n          //Origin: Origin,\r\n          providesTags: (result, error, custid) => [{ type: 'User', custid }],\r\n      }),\r\n    }),\r\n\r\n    checkCustomerEmail: builder.query ({\r\n      query: (arg) => {\r\n        const {custid, email} = arg;\r\n        return {\r\n        url: `/checkemail`,\r\n        params: { custid, email },\r\n        //Origin: Origin, \r\n        };\r\n      },\r\n    }),\r\n\r\n    checkCustomerCell: builder.query ({\r\n      query: (arg) => {\r\n        const {custid, cell} = arg;\r\n        return {\r\n        url: `/checkcell`,\r\n        params: { custid, cell },\r\n        //Origin: Origin,\r\n      };\r\n    },\r\n    }),\r\n\r\n    addCustomer: builder.mutation({\r\n      query: newUser => ({\r\n        url: '/addcustomer',\r\n        method: 'POST',\r\n        //Origin: Origin,\r\n        body: newUser\r\n      }),\r\n      invalidatesTags: ['User', 'Customers']\r\n    }),\r\n\r\n    updateCustomer: builder.mutation({\r\n      query: initialUser => ({\r\n        url: '/updatecustomer',\r\n        method: 'POST',\r\n        //Origin: Origin,\r\n        body: initialUser\r\n      }),\r\n      invalidatesTags: ['User', 'Customers']\r\n    }),\r\n\r\n    deleteCustomer: builder.mutation({\r\n      query: (custid) => ({\r\n        url: `/deletecustomer/${custid}`,\r\n        method: 'DELETE',\r\n        //Origin: Origin,\r\n      }),\r\n      invalidatesTags: ['Customers']\r\n    }),\r\n\r\n    addLocation: builder.mutation({\r\n      query: newLocation => ({\r\n        url: '/addsubscription',\r\n        method: 'POST',\r\n        //Origin: Origin,\r\n        body: newLocation\r\n      }),\r\n      invalidatesTags: ['Locations']\r\n      //invalidatesTags: (result, error, custid) => [{type: 'Locations', custid: custid}]\r\n    }),\r\n\r\n    findDuplicateLocation: builder.mutation({\r\n      query: newLocation => ({\r\n        url: '/findduplicatesubscription',\r\n        method: 'POST',\r\n        body: newLocation\r\n      }),\r\n      invalidatesTags: ['Locations']\r\n    }),\r\n\r\n    updateLocation: builder.mutation({\r\n      query: newLocation => ({\r\n        url: '/updatesubscription',\r\n        method: 'POST',\r\n        //Origin: Origin,\r\n        body: newLocation\r\n      }),\r\n      invalidatesTags: [{type: 'Locations', id: 5}, 'Locations']\r\n    }),\r\n\r\n    deleteLocation: builder.mutation({\r\n      query: (id) => ({\r\n        url: `/deletesubscription/${id}`,\r\n        method: 'DELETE',\r\n        //Origin: Origin,\r\n      invalidatesTags: [{type: 'Locations', id: 'LOCSBYCUSTID'}],\r\n    }),\r\n  }),\r\n\r\n    getLocationById: builder.query({\r\n      query: id => ({\r\n        url: `/getlocationbyid/${id}`,\r\n        //Origin: Origin,\r\n      providesTags:((id) => ({type: 'Locations', id })),\r\n      }),\r\n    }),\r\n\r\n    getLocationsByCustid: builder.query({\r\n      query: custid => ({\r\n        url: `/getlocationsbycustid/${custid}`,\r\n        //Origin:Origin,\r\n        providesTags: [{type: 'Locations', id: 'LOCSBYCUSTID'}],\r\n      }),\r\n    }),\r\n\r\n    addFriend: builder.mutation({\r\n      query: newFriend => ({\r\n        url: '/addfriend',\r\n        method: 'POST',\r\n        //Origin: Origin,\r\n        body: newFriend\r\n      }),\r\n      invalidatesTags: ['Friends']\r\n    }),\r\n\r\n    findDuplicateFriend: builder.mutation({\r\n      query: newFriend => ({\r\n        url: '/findduplicatefriend',\r\n        method: 'POST',\r\n        body: newFriend\r\n      }),\r\n      invalidatesTags: ['Friends']\r\n    }),\r\n\r\n    updateFriend: builder.mutation({\r\n      query: newFriend => ({\r\n        url: '/updatefriend',\r\n        method: 'POST',\r\n        //Origin: Origin,\r\n        body: newFriend\r\n      }),\r\n      invalidatesTags: ['Friends']\r\n    }),\r\n\r\n    deleteFriend: builder.mutation({\r\n      query: (id) => ({\r\n        url: `/deletefriend/${id}`,\r\n        method: 'DELETE',\r\n        //Origin: Origin,\r\n        invalidatesTags: ['Friends'],\r\n      }),\r\n    }),\r\n\r\n    getFriendsByCustid: builder.query({\r\n      query: custid => ({\r\n      url: `/getfriendsbycustid/${custid}`,\r\n      //Origin: Origin,\r\n      providesTags: [{type: 'Friends', custid}]\r\n      }),\r\n    }),\r\n\r\n    getZip: builder.query ({\r\n      query: (arg) => {\r\n        const {city, st} = arg;\r\n        return {\r\n        url: `/getzip`,\r\n        params: { city, st },\r\n        //Origin: Origin,\r\n      };\r\n    },\r\n    }),\r\n\r\n    findZip: builder.mutation({\r\n      query: newLocation => ({\r\n        url: `/findzip`,\r\n        method: `POST`,\r\n        //Origin: Origin,\r\n        body: newLocation\r\n      }),\r\n      //invalidatesTages: ['Locations']\r\n    })\r\n\r\n  })\r\n});\r\n//auto-generated hooks for each endpoint. These hooks encapsulate the process of triggering a request when a component mounts, and re-rendering the component as the request is processed and data is available. We can export these hooks out of the API slice file for use in our React components.\r\nexport const { \r\n  useListCustomersQuery, \r\n  useGetCustomerByCustidQuery, \r\n  useAddCustomerMutation, \r\n  useUpdateCustomerMutation, \r\n  useDeleteCustomerMutation,\r\n  useCheckCustomerEmailQuery, \r\n  useCheckCustomerCellQuery,\r\n\r\n  useGetLocationsByCustidQuery,\r\n  useGetLocationByIdQuery,\r\n  useAddLocationMutation, \r\n  useFindDuplicateLocationMutation,\r\n  useUpdateLocationMutation,\r\n  useDeleteLocationMutation,\r\n\r\n  useGetZipQuery,\r\n  useFindZipMutation,\r\n\r\n  useGetFriendsByCustidQuery,\r\n  useAddFriendMutation, \r\n  useFindDuplicateFriendMutation,\r\n  useUpdateFriendMutation,\r\n  useDeleteFriendMutation,\r\n} = apiSlice;\r\n\r\n"
    },
    {
      "file": "dashboard/src/app/redux/apiSlice.js",
      "description": "# apiSlice.js\r\n## createApi  \r\n- ### auto-generates a Redux slice reducer (named apiSlice)\r\n- ### creates a custom middleware to manage subscription lifetimes (named apiSlice)",
      "line": 6,
      "contents": "import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\r\n//import { baseUrl } from 'app/baseUrl';\r\n//const Origin = 'http://localhost:3002'; //CORS Origin must be in server's whitelist\r\n\r\nexport const apiSlice = createApi({\r\n  reducerPath: 'apiSlice',  //all data will be in Redux store at store.apiSlice\r\n  //baseQuery: fetchBaseQuery({ baseUrl: \"http://localhost:4000/api\" }),tagTypes: ['User', 'Locations', 'Friends', 'Customers'],\r\n  //keepUnusedDataFor: 5,\r\n  \r\n  baseQuery: fetchBaseQuery({ baseUrl: \"/api\" }),tagTypes: ['User', 'Locations', 'Friends', 'Customers'],\r\n  keepUnusedDataFor: 5,\r\n  \r\n  //baseQuery: fetchBaseQuery( '${baseUrl}/api' ),tagTypes: ['User', 'Locations', 'Friends', 'Customers'],\r\n  //endpoints are calls to the Postgres server\r\n  endpoints: builder => ({\r\n\r\n    listCustomers: builder.query({\r\n      //query is a call to '${baseUrl}/listcustomers'\r\n      query: () => ({\r\n      url: '/listcustomers',\r\n      //Origin: Origin,\r\n      providesTags: ['Customers'],\r\n      }),\r\n    }),\r\n\r\n    getCustomerByCustid: builder.query({\r\n      query: custid => ({\r\n          url: `/getcustomerbycustid/${custid}`,\r\n          //Origin: Origin,\r\n          providesTags: (result, error, custid) => [{ type: 'User', custid }],\r\n      }),\r\n    }),\r\n\r\n    checkCustomerEmail: builder.query ({\r\n      query: (arg) => {\r\n        const {custid, email} = arg;\r\n        return {\r\n        url: `/checkemail`,\r\n        params: { custid, email },\r\n        //Origin: Origin, \r\n        };\r\n      },\r\n    }),\r\n\r\n    checkCustomerCell: builder.query ({\r\n      query: (arg) => {\r\n        const {custid, cell} = arg;\r\n        return {\r\n        url: `/checkcell`,\r\n        params: { custid, cell },\r\n        //Origin: Origin,\r\n      };\r\n    },\r\n    }),\r\n\r\n    addCustomer: builder.mutation({\r\n      query: newUser => ({\r\n        url: '/addcustomer',\r\n        method: 'POST',\r\n        //Origin: Origin,\r\n        body: newUser\r\n      }),\r\n      invalidatesTags: ['User', 'Customers']\r\n    }),\r\n\r\n    updateCustomer: builder.mutation({\r\n      query: initialUser => ({\r\n        url: '/updatecustomer',\r\n        method: 'POST',\r\n        //Origin: Origin,\r\n        body: initialUser\r\n      }),\r\n      invalidatesTags: ['User', 'Customers']\r\n    }),\r\n\r\n    deleteCustomer: builder.mutation({\r\n      query: (custid) => ({\r\n        url: `/deletecustomer/${custid}`,\r\n        method: 'DELETE',\r\n        //Origin: Origin,\r\n      }),\r\n      invalidatesTags: ['Customers']\r\n    }),\r\n\r\n    addLocation: builder.mutation({\r\n      query: newLocation => ({\r\n        url: '/addsubscription',\r\n        method: 'POST',\r\n        //Origin: Origin,\r\n        body: newLocation\r\n      }),\r\n      invalidatesTags: ['Locations']\r\n      //invalidatesTags: (result, error, custid) => [{type: 'Locations', custid: custid}]\r\n    }),\r\n\r\n    findDuplicateLocation: builder.mutation({\r\n      query: newLocation => ({\r\n        url: '/findduplicatesubscription',\r\n        method: 'POST',\r\n        body: newLocation\r\n      }),\r\n      invalidatesTags: ['Locations']\r\n    }),\r\n\r\n    updateLocation: builder.mutation({\r\n      query: newLocation => ({\r\n        url: '/updatesubscription',\r\n        method: 'POST',\r\n        //Origin: Origin,\r\n        body: newLocation\r\n      }),\r\n      invalidatesTags: [{type: 'Locations', id: 5}, 'Locations']\r\n    }),\r\n\r\n    deleteLocation: builder.mutation({\r\n      query: (id) => ({\r\n        url: `/deletesubscription/${id}`,\r\n        method: 'DELETE',\r\n        //Origin: Origin,\r\n      invalidatesTags: [{type: 'Locations', id: 'LOCSBYCUSTID'}],\r\n    }),\r\n  }),\r\n\r\n    getLocationById: builder.query({\r\n      query: id => ({\r\n        url: `/getlocationbyid/${id}`,\r\n        //Origin: Origin,\r\n      providesTags:((id) => ({type: 'Locations', id })),\r\n      }),\r\n    }),\r\n\r\n    getLocationsByCustid: builder.query({\r\n      query: custid => ({\r\n        url: `/getlocationsbycustid/${custid}`,\r\n        //Origin:Origin,\r\n        providesTags: [{type: 'Locations', id: 'LOCSBYCUSTID'}],\r\n      }),\r\n    }),\r\n\r\n    addFriend: builder.mutation({\r\n      query: newFriend => ({\r\n        url: '/addfriend',\r\n        method: 'POST',\r\n        //Origin: Origin,\r\n        body: newFriend\r\n      }),\r\n      invalidatesTags: ['Friends']\r\n    }),\r\n\r\n    findDuplicateFriend: builder.mutation({\r\n      query: newFriend => ({\r\n        url: '/findduplicatefriend',\r\n        method: 'POST',\r\n        body: newFriend\r\n      }),\r\n      invalidatesTags: ['Friends']\r\n    }),\r\n\r\n    updateFriend: builder.mutation({\r\n      query: newFriend => ({\r\n        url: '/updatefriend',\r\n        method: 'POST',\r\n        //Origin: Origin,\r\n        body: newFriend\r\n      }),\r\n      invalidatesTags: ['Friends']\r\n    }),\r\n\r\n    deleteFriend: builder.mutation({\r\n      query: (id) => ({\r\n        url: `/deletefriend/${id}`,\r\n        method: 'DELETE',\r\n        //Origin: Origin,\r\n        invalidatesTags: ['Friends'],\r\n      }),\r\n    }),\r\n\r\n    getFriendsByCustid: builder.query({\r\n      query: custid => ({\r\n      url: `/getfriendsbycustid/${custid}`,\r\n      //Origin: Origin,\r\n      providesTags: [{type: 'Friends', custid}]\r\n      }),\r\n    }),\r\n\r\n    getZip: builder.query ({\r\n      query: (arg) => {\r\n        const {city, st} = arg;\r\n        return {\r\n        url: `/getzip`,\r\n        params: { city, st },\r\n        //Origin: Origin,\r\n      };\r\n    },\r\n    }),\r\n\r\n    findZip: builder.mutation({\r\n      query: newLocation => ({\r\n        url: `/findzip`,\r\n        method: `POST`,\r\n        //Origin: Origin,\r\n        body: newLocation\r\n      }),\r\n      //invalidatesTages: ['Locations']\r\n    })\r\n\r\n  })\r\n});\r\n//auto-generated hooks for each endpoint. These hooks encapsulate the process of triggering a request when a component mounts, and re-rendering the component as the request is processed and data is available. We can export these hooks out of the API slice file for use in our React components.\r\nexport const { \r\n  useListCustomersQuery, \r\n  useGetCustomerByCustidQuery, \r\n  useAddCustomerMutation, \r\n  useUpdateCustomerMutation, \r\n  useDeleteCustomerMutation,\r\n  useCheckCustomerEmailQuery, \r\n  useCheckCustomerCellQuery,\r\n\r\n  useGetLocationsByCustidQuery,\r\n  useGetLocationByIdQuery,\r\n  useAddLocationMutation, \r\n  useFindDuplicateLocationMutation,\r\n  useUpdateLocationMutation,\r\n  useDeleteLocationMutation,\r\n\r\n  useGetZipQuery,\r\n  useFindZipMutation,\r\n\r\n  useGetFriendsByCustidQuery,\r\n  useAddFriendMutation, \r\n  useFindDuplicateFriendMutation,\r\n  useUpdateFriendMutation,\r\n  useDeleteFriendMutation,\r\n} = apiSlice;\r\n\r\n"
    },
    {
      "file": "dashboard/src/app/redux/store.js",
      "description": "# store.js\r\n## create the Store in store.js\r\n- ### Add the generated apiSlice reducer as a top-level slice:\r\n\r\n```\r\n[apiSlice.reducerPath]: apiSlice.reducer,\r\n```\r\n\r\n\r\n- ### Add the apiSlice middleware. It enables caching, invalidation, polling, etc.\r\n\r\n```\r\nmiddleware: getDefaultMiddleware =>\r\n    getDefaultMiddleware().concat(apiSlice.middleware)\r\n```\r\n\r\n- ### Optionally, add **setupListeners**. It's needed if you want to **refetchOnFocus** or **refetchOnReconnect**.  \r\n\r\n```\r\nsetupListeners(store.dispatch)\r\n```\r\n\r\n",
      "line": 28,
      "selection": {
        "start": {
          "line": 25,
          "character": 3
        },
        "end": {
          "line": 26,
          "character": 55
        }
      },
      "contents": "import { configureStore } from '@reduxjs/toolkit';\r\nimport userReducer from 'app/redux/userSlice';\r\nimport customersReducer from 'app/redux/customersSlice';\r\nimport locationsReducer from 'app/redux/locationsSlice';\r\nimport friendsReducer from 'app/redux/friendsSlice';\r\nimport errorsReducer from 'app/redux/errorsSlice';\r\nimport stepperReducer from 'app/redux/stepperSlice';\r\nimport rssfeedsReducer from 'app/redux/rssSlice';\r\nimport rssitemsReducer from 'app/redux/rssItemsSlice';\r\nimport { apiSlice } from 'app/redux/apiSlice';\r\n\r\nexport default configureStore({\r\n  reducer: {\r\n    user: userReducer,\r\n    locations: locationsReducer,\r\n    friends: friendsReducer,\r\n    errors: errorsReducer,\r\n    stepper: stepperReducer,\r\n    customers: customersReducer,\r\n    rssfeeds: rssfeedsReducer,\r\n    rssitems: rssitemsReducer,\r\n    [apiSlice.reducerPath]: apiSlice.reducer,\r\n  },\r\n\r\n  middleware: getDefaultMiddleware =>\r\n    getDefaultMiddleware().concat(apiSlice.middleware)\r\n})\r\n"
    },
    {
      "file": "dashboard/src/app/redux/apiSlice.js",
      "description": "# apiSlice.js\r\n\r\n- ## In **apiSlice.js** build endpoints for every query to the **baseUrl**",
      "line": 33,
      "contents": "import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\r\n//import { baseUrl } from 'app/baseUrl';\r\n//const Origin = 'http://localhost:3002'; //CORS Origin must be in server's whitelist\r\n\r\nexport const apiSlice = createApi({\r\n  reducerPath: 'apiSlice',  //all data will be in Redux store at store.apiSlice\r\n  //baseQuery: fetchBaseQuery({ baseUrl: \"http://localhost:4000/api\" }),tagTypes: ['User', 'Locations', 'Friends', 'Customers'],\r\n  //keepUnusedDataFor: 5,\r\n  \r\n  baseQuery: fetchBaseQuery({ baseUrl: \"/api\" }),tagTypes: ['User', 'Locations', 'Friends', 'Customers'],\r\n  keepUnusedDataFor: 5,\r\n  \r\n  //baseQuery: fetchBaseQuery( '${baseUrl}/api' ),tagTypes: ['User', 'Locations', 'Friends', 'Customers'],\r\n  //endpoints are calls to the Postgres server\r\n  endpoints: builder => ({\r\n\r\n    listCustomers: builder.query({\r\n      //query is a call to '${baseUrl}/listcustomers'\r\n      query: () => ({\r\n      url: '/listcustomers',\r\n      //Origin: Origin,\r\n      providesTags: ['Customers'],\r\n      }),\r\n    }),\r\n\r\n    getCustomerByCustid: builder.query({\r\n      query: custid => ({\r\n          url: `/getcustomerbycustid/${custid}`,\r\n          //Origin: Origin,\r\n          providesTags: (result, error, custid) => [{ type: 'User', custid }],\r\n      }),\r\n    }),\r\n\r\n    checkCustomerEmail: builder.query ({\r\n      query: (arg) => {\r\n        const {custid, email} = arg;\r\n        return {\r\n        url: `/checkemail`,\r\n        params: { custid, email },\r\n        //Origin: Origin, \r\n        };\r\n      },\r\n    }),\r\n\r\n    checkCustomerCell: builder.query ({\r\n      query: (arg) => {\r\n        const {custid, cell} = arg;\r\n        return {\r\n        url: `/checkcell`,\r\n        params: { custid, cell },\r\n        //Origin: Origin,\r\n      };\r\n    },\r\n    }),\r\n\r\n    addCustomer: builder.mutation({\r\n      query: newUser => ({\r\n        url: '/addcustomer',\r\n        method: 'POST',\r\n        //Origin: Origin,\r\n        body: newUser\r\n      }),\r\n      invalidatesTags: ['User', 'Customers']\r\n    }),\r\n\r\n    updateCustomer: builder.mutation({\r\n      query: initialUser => ({\r\n        url: '/updatecustomer',\r\n        method: 'POST',\r\n        //Origin: Origin,\r\n        body: initialUser\r\n      }),\r\n      invalidatesTags: ['User', 'Customers']\r\n    }),\r\n\r\n    deleteCustomer: builder.mutation({\r\n      query: (custid) => ({\r\n        url: `/deletecustomer/${custid}`,\r\n        method: 'DELETE',\r\n        //Origin: Origin,\r\n      }),\r\n      invalidatesTags: ['Customers']\r\n    }),\r\n\r\n    addLocation: builder.mutation({\r\n      query: newLocation => ({\r\n        url: '/addsubscription',\r\n        method: 'POST',\r\n        //Origin: Origin,\r\n        body: newLocation\r\n      }),\r\n      invalidatesTags: ['Locations']\r\n      //invalidatesTags: (result, error, custid) => [{type: 'Locations', custid: custid}]\r\n    }),\r\n\r\n    findDuplicateLocation: builder.mutation({\r\n      query: newLocation => ({\r\n        url: '/findduplicatesubscription',\r\n        method: 'POST',\r\n        body: newLocation\r\n      }),\r\n      invalidatesTags: ['Locations']\r\n    }),\r\n\r\n    updateLocation: builder.mutation({\r\n      query: newLocation => ({\r\n        url: '/updatesubscription',\r\n        method: 'POST',\r\n        //Origin: Origin,\r\n        body: newLocation\r\n      }),\r\n      invalidatesTags: [{type: 'Locations', id: 5}, 'Locations']\r\n    }),\r\n\r\n    deleteLocation: builder.mutation({\r\n      query: (id) => ({\r\n        url: `/deletesubscription/${id}`,\r\n        method: 'DELETE',\r\n        //Origin: Origin,\r\n      invalidatesTags: [{type: 'Locations', id: 'LOCSBYCUSTID'}],\r\n    }),\r\n  }),\r\n\r\n    getLocationById: builder.query({\r\n      query: id => ({\r\n        url: `/getlocationbyid/${id}`,\r\n        //Origin: Origin,\r\n      providesTags:((id) => ({type: 'Locations', id })),\r\n      }),\r\n    }),\r\n\r\n    getLocationsByCustid: builder.query({\r\n      query: custid => ({\r\n        url: `/getlocationsbycustid/${custid}`,\r\n        //Origin:Origin,\r\n        providesTags: [{type: 'Locations', id: 'LOCSBYCUSTID'}],\r\n      }),\r\n    }),\r\n\r\n    addFriend: builder.mutation({\r\n      query: newFriend => ({\r\n        url: '/addfriend',\r\n        method: 'POST',\r\n        //Origin: Origin,\r\n        body: newFriend\r\n      }),\r\n      invalidatesTags: ['Friends']\r\n    }),\r\n\r\n    findDuplicateFriend: builder.mutation({\r\n      query: newFriend => ({\r\n        url: '/findduplicatefriend',\r\n        method: 'POST',\r\n        body: newFriend\r\n      }),\r\n      invalidatesTags: ['Friends']\r\n    }),\r\n\r\n    updateFriend: builder.mutation({\r\n      query: newFriend => ({\r\n        url: '/updatefriend',\r\n        method: 'POST',\r\n        //Origin: Origin,\r\n        body: newFriend\r\n      }),\r\n      invalidatesTags: ['Friends']\r\n    }),\r\n\r\n    deleteFriend: builder.mutation({\r\n      query: (id) => ({\r\n        url: `/deletefriend/${id}`,\r\n        method: 'DELETE',\r\n        //Origin: Origin,\r\n        invalidatesTags: ['Friends'],\r\n      }),\r\n    }),\r\n\r\n    getFriendsByCustid: builder.query({\r\n      query: custid => ({\r\n      url: `/getfriendsbycustid/${custid}`,\r\n      //Origin: Origin,\r\n      providesTags: [{type: 'Friends', custid}]\r\n      }),\r\n    }),\r\n\r\n    getZip: builder.query ({\r\n      query: (arg) => {\r\n        const {city, st} = arg;\r\n        return {\r\n        url: `/getzip`,\r\n        params: { city, st },\r\n        //Origin: Origin,\r\n      };\r\n    },\r\n    }),\r\n\r\n    findZip: builder.mutation({\r\n      query: newLocation => ({\r\n        url: `/findzip`,\r\n        method: `POST`,\r\n        //Origin: Origin,\r\n        body: newLocation\r\n      }),\r\n      //invalidatesTages: ['Locations']\r\n    })\r\n\r\n  })\r\n});\r\n//auto-generated hooks for each endpoint. These hooks encapsulate the process of triggering a request when a component mounts, and re-rendering the component as the request is processed and data is available. We can export these hooks out of the API slice file for use in our React components.\r\nexport const { \r\n  useListCustomersQuery, \r\n  useGetCustomerByCustidQuery, \r\n  useAddCustomerMutation, \r\n  useUpdateCustomerMutation, \r\n  useDeleteCustomerMutation,\r\n  useCheckCustomerEmailQuery, \r\n  useCheckCustomerCellQuery,\r\n\r\n  useGetLocationsByCustidQuery,\r\n  useGetLocationByIdQuery,\r\n  useAddLocationMutation, \r\n  useFindDuplicateLocationMutation,\r\n  useUpdateLocationMutation,\r\n  useDeleteLocationMutation,\r\n\r\n  useGetZipQuery,\r\n  useFindZipMutation,\r\n\r\n  useGetFriendsByCustidQuery,\r\n  useAddFriendMutation, \r\n  useFindDuplicateFriendMutation,\r\n  useUpdateFriendMutation,\r\n  useDeleteFriendMutation,\r\n} = apiSlice;\r\n\r\n"
    },
    {
      "file": "dashboard/src/index.js",
      "description": "# index.js\r\n\r\n- ### In **index.js** wrap the entire app in a Redux provider.",
      "line": 7,
      "contents": "import \"react-app-polyfill/ie11\";\r\nimport \"react-app-polyfill/stable\";\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport store from 'app/redux/store'\r\nimport { Provider } from 'react-redux'\r\nimport App from \"app/App\";\r\nimport \"./index.scss\"; // Standard version\r\nimport \"socicon/css/socicon.css\";\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport { MetronicLayoutProvider } from 'app/components/layout/MetronicLayout';\r\nimport { MetronicSplashScreenProvider } from 'app/components/layout/MetronicSplashScreen';\r\nimport { MetronicSubheaderProvider } from \"app/components/layout/MetronicSubheader\";\r\nimport { MetronicI18nProvider } from \"app/helpers/i18n\";\r\nimport { CookiesProvider } from 'react-cookie';\r\n\r\n/**\r\n * Base URL of the website.\r\n *\r\n * @see https://facebook.github.io/create-react-app/docs/using-the-public-folder\r\n */\r\nconst { PUBLIC_URL } = process.env;\r\n\r\n/**\r\n * Creates `axios-mock-adapter` instance for provided `axios` instance, add\r\n * basic Metronic mocks and returns it.\r\n *\r\n * @see https://github.com/ctimmerm/axios-mock-adapter\r\n */\r\n/* const mock =  _redux.mockAxios(axios); */\r\n/**\r\n * Inject metronic interceptors for axios.\r\n *\r\n * @see https://github.com/axios/axios#interceptors\r\n */\r\n/* _redux.setupAxios(axios, store); */\r\n\r\nReactDOM.render(\r\n  <CookiesProvider>\r\n    <Provider store={ store }>\r\n      <Router>\r\n        <MetronicI18nProvider>\r\n          <MetronicLayoutProvider>\r\n            <MetronicSubheaderProvider>\r\n              <MetronicSplashScreenProvider>\r\n                <App basename={ PUBLIC_URL } />\r\n              </MetronicSplashScreenProvider>\r\n            </MetronicSubheaderProvider>\r\n          </MetronicLayoutProvider>\r\n        </MetronicI18nProvider>\r\n      </Router>\r\n    </Provider>\r\n  </CookiesProvider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"
    },
    {
      "file": "dashboard/src/index.js",
      "description": "# index.js\r\n```\r\n<Provider store={ store }>\r\n```\r\n",
      "line": 54,
      "contents": "import \"react-app-polyfill/ie11\";\r\nimport \"react-app-polyfill/stable\";\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport store from 'app/redux/store'\r\nimport { Provider } from 'react-redux'\r\nimport App from \"app/App\";\r\nimport \"./index.scss\"; // Standard version\r\nimport \"socicon/css/socicon.css\";\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport { MetronicLayoutProvider } from 'app/components/layout/MetronicLayout';\r\nimport { MetronicSplashScreenProvider } from 'app/components/layout/MetronicSplashScreen';\r\nimport { MetronicSubheaderProvider } from \"app/components/layout/MetronicSubheader\";\r\nimport { MetronicI18nProvider } from \"app/helpers/i18n\";\r\nimport { CookiesProvider } from 'react-cookie';\r\n\r\n/**\r\n * Base URL of the website.\r\n *\r\n * @see https://facebook.github.io/create-react-app/docs/using-the-public-folder\r\n */\r\nconst { PUBLIC_URL } = process.env;\r\n\r\n/**\r\n * Creates `axios-mock-adapter` instance for provided `axios` instance, add\r\n * basic Metronic mocks and returns it.\r\n *\r\n * @see https://github.com/ctimmerm/axios-mock-adapter\r\n */\r\n/* const mock =  _redux.mockAxios(axios); */\r\n/**\r\n * Inject metronic interceptors for axios.\r\n *\r\n * @see https://github.com/axios/axios#interceptors\r\n */\r\n/* _redux.setupAxios(axios, store); */\r\n\r\nReactDOM.render(\r\n  <CookiesProvider>\r\n    <Provider store={ store }>\r\n      <Router>\r\n        <MetronicI18nProvider>\r\n          <MetronicLayoutProvider>\r\n            <MetronicSubheaderProvider>\r\n              <MetronicSplashScreenProvider>\r\n                <App basename={ PUBLIC_URL } />\r\n              </MetronicSplashScreenProvider>\r\n            </MetronicSubheaderProvider>\r\n          </MetronicLayoutProvider>\r\n        </MetronicI18nProvider>\r\n      </Router>\r\n    </Provider>\r\n  </CookiesProvider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"
    },
    {
      "file": "dashboard/src/app/redux/apiSlice.js",
      "description": "# apiSlice.js\r\n\r\n- ### In **apiSlice.js** export the auto-generated hooks that were created for each endpoint. \r\n\r\n- ### They always start with \"use\"endpoint_name\"Query/Mutation\"\r\n",
      "line": 234,
      "contents": "import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\r\n//import { baseUrl } from 'app/baseUrl';\r\n//const Origin = 'http://localhost:3002'; //CORS Origin must be in server's whitelist\r\n\r\nexport const apiSlice = createApi({\r\n  reducerPath: 'apiSlice',  //all data will be in Redux store at store.apiSlice\r\n  //baseQuery: fetchBaseQuery({ baseUrl: \"http://localhost:4000/api\" }),tagTypes: ['User', 'Locations', 'Friends', 'Customers'],\r\n  //keepUnusedDataFor: 5,\r\n  \r\n  baseQuery: fetchBaseQuery({ baseUrl: \"/api\" }),tagTypes: ['User', 'Locations', 'Friends', 'Customers'],\r\n  keepUnusedDataFor: 5,\r\n  \r\n  //baseQuery: fetchBaseQuery( '${baseUrl}/api' ),tagTypes: ['User', 'Locations', 'Friends', 'Customers'],\r\n  //endpoints are calls to the Postgres server\r\n  endpoints: builder => ({\r\n\r\n    listCustomers: builder.query({\r\n      //query is a call to '${baseUrl}/listcustomers'\r\n      query: () => ({\r\n      url: '/listcustomers',\r\n      //Origin: Origin,\r\n      providesTags: ['Customers'],\r\n      }),\r\n    }),\r\n\r\n    getCustomerByCustid: builder.query({\r\n      query: custid => ({\r\n          url: `/getcustomerbycustid/${custid}`,\r\n          //Origin: Origin,\r\n          providesTags: (result, error, custid) => [{ type: 'User', custid }],\r\n      }),\r\n    }),\r\n\r\n    checkCustomerEmail: builder.query ({\r\n      query: (arg) => {\r\n        const {custid, email} = arg;\r\n        return {\r\n        url: `/checkemail`,\r\n        params: { custid, email },\r\n        //Origin: Origin, \r\n        };\r\n      },\r\n    }),\r\n\r\n    checkCustomerCell: builder.query ({\r\n      query: (arg) => {\r\n        const {custid, cell} = arg;\r\n        return {\r\n        url: `/checkcell`,\r\n        params: { custid, cell },\r\n        //Origin: Origin,\r\n      };\r\n    },\r\n    }),\r\n\r\n    addCustomer: builder.mutation({\r\n      query: newUser => ({\r\n        url: '/addcustomer',\r\n        method: 'POST',\r\n        //Origin: Origin,\r\n        body: newUser\r\n      }),\r\n      invalidatesTags: ['User', 'Customers']\r\n    }),\r\n\r\n    updateCustomer: builder.mutation({\r\n      query: initialUser => ({\r\n        url: '/updatecustomer',\r\n        method: 'POST',\r\n        //Origin: Origin,\r\n        body: initialUser\r\n      }),\r\n      invalidatesTags: ['User', 'Customers']\r\n    }),\r\n\r\n    deleteCustomer: builder.mutation({\r\n      query: (custid) => ({\r\n        url: `/deletecustomer/${custid}`,\r\n        method: 'DELETE',\r\n        //Origin: Origin,\r\n      }),\r\n      invalidatesTags: ['Customers']\r\n    }),\r\n\r\n    addLocation: builder.mutation({\r\n      query: newLocation => ({\r\n        url: '/addsubscription',\r\n        method: 'POST',\r\n        //Origin: Origin,\r\n        body: newLocation\r\n      }),\r\n      invalidatesTags: ['Locations']\r\n      //invalidatesTags: (result, error, custid) => [{type: 'Locations', custid: custid}]\r\n    }),\r\n\r\n    findDuplicateLocation: builder.mutation({\r\n      query: newLocation => ({\r\n        url: '/findduplicatesubscription',\r\n        method: 'POST',\r\n        body: newLocation\r\n      }),\r\n      invalidatesTags: ['Locations']\r\n    }),\r\n\r\n    updateLocation: builder.mutation({\r\n      query: newLocation => ({\r\n        url: '/updatesubscription',\r\n        method: 'POST',\r\n        //Origin: Origin,\r\n        body: newLocation\r\n      }),\r\n      invalidatesTags: [{type: 'Locations', id: 5}, 'Locations']\r\n    }),\r\n\r\n    deleteLocation: builder.mutation({\r\n      query: (id) => ({\r\n        url: `/deletesubscription/${id}`,\r\n        method: 'DELETE',\r\n        //Origin: Origin,\r\n      invalidatesTags: [{type: 'Locations', id: 'LOCSBYCUSTID'}],\r\n    }),\r\n  }),\r\n\r\n    getLocationById: builder.query({\r\n      query: id => ({\r\n        url: `/getlocationbyid/${id}`,\r\n        //Origin: Origin,\r\n      providesTags:((id) => ({type: 'Locations', id })),\r\n      }),\r\n    }),\r\n\r\n    getLocationsByCustid: builder.query({\r\n      query: custid => ({\r\n        url: `/getlocationsbycustid/${custid}`,\r\n        //Origin:Origin,\r\n        providesTags: [{type: 'Locations', id: 'LOCSBYCUSTID'}],\r\n      }),\r\n    }),\r\n\r\n    addFriend: builder.mutation({\r\n      query: newFriend => ({\r\n        url: '/addfriend',\r\n        method: 'POST',\r\n        //Origin: Origin,\r\n        body: newFriend\r\n      }),\r\n      invalidatesTags: ['Friends']\r\n    }),\r\n\r\n    findDuplicateFriend: builder.mutation({\r\n      query: newFriend => ({\r\n        url: '/findduplicatefriend',\r\n        method: 'POST',\r\n        body: newFriend\r\n      }),\r\n      invalidatesTags: ['Friends']\r\n    }),\r\n\r\n    updateFriend: builder.mutation({\r\n      query: newFriend => ({\r\n        url: '/updatefriend',\r\n        method: 'POST',\r\n        //Origin: Origin,\r\n        body: newFriend\r\n      }),\r\n      invalidatesTags: ['Friends']\r\n    }),\r\n\r\n    deleteFriend: builder.mutation({\r\n      query: (id) => ({\r\n        url: `/deletefriend/${id}`,\r\n        method: 'DELETE',\r\n        //Origin: Origin,\r\n        invalidatesTags: ['Friends'],\r\n      }),\r\n    }),\r\n\r\n    getFriendsByCustid: builder.query({\r\n      query: custid => ({\r\n      url: `/getfriendsbycustid/${custid}`,\r\n      //Origin: Origin,\r\n      providesTags: [{type: 'Friends', custid}]\r\n      }),\r\n    }),\r\n\r\n    getZip: builder.query ({\r\n      query: (arg) => {\r\n        const {city, st} = arg;\r\n        return {\r\n        url: `/getzip`,\r\n        params: { city, st },\r\n        //Origin: Origin,\r\n      };\r\n    },\r\n    }),\r\n\r\n    findZip: builder.mutation({\r\n      query: newLocation => ({\r\n        url: `/findzip`,\r\n        method: `POST`,\r\n        //Origin: Origin,\r\n        body: newLocation\r\n      }),\r\n      //invalidatesTages: ['Locations']\r\n    })\r\n\r\n  })\r\n});\r\n//auto-generated hooks for each endpoint. These hooks encapsulate the process of triggering a request when a component mounts, and re-rendering the component as the request is processed and data is available. We can export these hooks out of the API slice file for use in our React components.\r\nexport const { \r\n  useListCustomersQuery, \r\n  useGetCustomerByCustidQuery, \r\n  useAddCustomerMutation, \r\n  useUpdateCustomerMutation, \r\n  useDeleteCustomerMutation,\r\n  useCheckCustomerEmailQuery, \r\n  useCheckCustomerCellQuery,\r\n\r\n  useGetLocationsByCustidQuery,\r\n  useGetLocationByIdQuery,\r\n  useAddLocationMutation, \r\n  useFindDuplicateLocationMutation,\r\n  useUpdateLocationMutation,\r\n  useDeleteLocationMutation,\r\n\r\n  useGetZipQuery,\r\n  useFindZipMutation,\r\n\r\n  useGetFriendsByCustidQuery,\r\n  useAddFriendMutation, \r\n  useFindDuplicateFriendMutation,\r\n  useUpdateFriendMutation,\r\n  useDeleteFriendMutation,\r\n} = apiSlice;\r\n\r\n"
    },
    {
      "file": "dashboard/src/app/redux/userSlice.js",
      "description": "# userSlice.js\r\n\r\n- ### Create a separate 'slice' file for each object you want to store in Redux. This defines the shape of your Redux store and defines how to read from and write to your store.",
      "line": 10,
      "contents": "import { createSlice } from '@reduxjs/toolkit';\r\nimport { initUser } from 'app/helpers/Initializers';\r\n\r\nconst data = {...initUser};\r\n\r\nconst initialState = { \r\n   user: {...data},\r\n };\r\n\r\nexport const userSlice = createSlice({\r\n  name: 'user',\r\n  initialState,\r\n  reducers: {\r\n  \r\n    updateUserState: (state, action) => {\r\n      const {isLoggedIn, custid, firstname, lastname, email, cell, addr1, addr2, city, st, zip, usertype } = action.payload;\r\n      const existingUser = state.user;\r\n      if (existingUser) {\r\n        if(isLoggedIn) existingUser.isLoggedIn = isLoggedIn;\r\n        if(custid) existingUser.custid = custid;\r\n        if(firstname) existingUser.firstname = firstname;\r\n        if(lastname) existingUser.lastname = lastname;\r\n        if(email) existingUser.email = email;\r\n        if(cell) existingUser.cell = cell;\r\n        if(addr1) existingUser.addr1 = addr1;\r\n        if(addr2) existingUser.addr2 = addr2;\r\n        if(city) existingUser.city = city;\r\n        if(st) existingUser.st = st;\r\n        if(zip) existingUser.zip = zip;\r\n        if(usertype) existingUser.usertype = usertype;\r\n      }\r\n    },\r\n    \r\n    updateCustidState: (state, action) => {\r\n      const{affectedRows, fieldCount, info, insertId, serverStatus, warningStatus} = action.payload;\r\n      console.log(`action.payload: `,action.payload);\r\n      let custid = insertId; \r\n      const existingUser = state.user;\r\n      if(existingUser) {\r\n        existingUser.custid = custid;\r\n      }\r\n    },\r\n\r\n    updateIsLoggedInState: (state, action) => {\r\n      const{isLoggedIn} = action.payload;\r\n      const existingUser = state.user;\r\n      if(existingUser){\r\n        if(isLoggedIn) \r\n          existingUser.isLoggedIn = isLoggedIn;\r\n      }\r\n    },\r\n\r\n  resetUserState: (state, action) => {\r\n    return initialState;\r\n  },\r\n}\r\n\r\n});\r\n\r\n// Action creators generated for each reducer function\r\nexport const { addNewCustidState, updateUserState, updateCustidState, updateIsLoggedInState, resetUserState } = userSlice.actions;\r\n\r\nexport default userSlice.reducer;\r\n\r\nexport const selectCurrentUser = state => state.user.user;\r\nexport const selectUserEmail = state => state.user.user.email;\r\nexport const selectUserCell = state => state.user.user.cell;\r\nexport const selectUserCustid = state => state.user.user.custid;\r\n"
    },
    {
      "file": "dashboard/src/app/redux/userSlice.js",
      "description": "# userSlice.js\r\n- ## Export the action creators generated for each mutation function (change of state).\r\n- ## Export the slice reducer",
      "line": 63,
      "contents": "import { createSlice } from '@reduxjs/toolkit';\r\nimport { initUser } from 'app/helpers/Initializers';\r\n\r\nconst data = {...initUser};\r\n\r\nconst initialState = { \r\n   user: {...data},\r\n };\r\n\r\nexport const userSlice = createSlice({\r\n  name: 'user',\r\n  initialState,\r\n  reducers: {\r\n  \r\n    updateUserState: (state, action) => {\r\n      const {isLoggedIn, custid, firstname, lastname, email, cell, addr1, addr2, city, st, zip, usertype } = action.payload;\r\n      const existingUser = state.user;\r\n      if (existingUser) {\r\n        if(isLoggedIn) existingUser.isLoggedIn = isLoggedIn;\r\n        if(custid) existingUser.custid = custid;\r\n        if(firstname) existingUser.firstname = firstname;\r\n        if(lastname) existingUser.lastname = lastname;\r\n        if(email) existingUser.email = email;\r\n        if(cell) existingUser.cell = cell;\r\n        if(addr1) existingUser.addr1 = addr1;\r\n        if(addr2) existingUser.addr2 = addr2;\r\n        if(city) existingUser.city = city;\r\n        if(st) existingUser.st = st;\r\n        if(zip) existingUser.zip = zip;\r\n        if(usertype) existingUser.usertype = usertype;\r\n      }\r\n    },\r\n    \r\n    updateCustidState: (state, action) => {\r\n      const{affectedRows, fieldCount, info, insertId, serverStatus, warningStatus} = action.payload;\r\n      console.log(`action.payload: `,action.payload);\r\n      let custid = insertId; \r\n      const existingUser = state.user;\r\n      if(existingUser) {\r\n        existingUser.custid = custid;\r\n      }\r\n    },\r\n\r\n    updateIsLoggedInState: (state, action) => {\r\n      const{isLoggedIn} = action.payload;\r\n      const existingUser = state.user;\r\n      if(existingUser){\r\n        if(isLoggedIn) \r\n          existingUser.isLoggedIn = isLoggedIn;\r\n      }\r\n    },\r\n\r\n  resetUserState: (state, action) => {\r\n    return initialState;\r\n  },\r\n}\r\n\r\n});\r\n\r\n// Action creators generated for each reducer function\r\nexport const { addNewCustidState, updateUserState, updateCustidState, updateIsLoggedInState, resetUserState } = userSlice.actions;\r\n\r\nexport default userSlice.reducer;\r\n\r\nexport const selectCurrentUser = state => state.user.user;\r\nexport const selectUserEmail = state => state.user.user.email;\r\nexport const selectUserCell = state => state.user.user.cell;\r\nexport const selectUserCustid = state => state.user.user.custid;\r\n"
    },
    {
      "file": "dashboard/src/app/redux/userSlice.js",
      "description": "# userSlice.js\r\n- ## Export the 'select' functions you'll use to query the Store.",
      "line": 68,
      "contents": "import { createSlice } from '@reduxjs/toolkit';\r\nimport { initUser } from 'app/helpers/Initializers';\r\n\r\nconst data = {...initUser};\r\n\r\nconst initialState = { \r\n   user: {...data},\r\n };\r\n\r\nexport const userSlice = createSlice({\r\n  name: 'user',\r\n  initialState,\r\n  reducers: {\r\n  \r\n    updateUserState: (state, action) => {\r\n      const {isLoggedIn, custid, firstname, lastname, email, cell, addr1, addr2, city, st, zip, usertype } = action.payload;\r\n      const existingUser = state.user;\r\n      if (existingUser) {\r\n        if(isLoggedIn) existingUser.isLoggedIn = isLoggedIn;\r\n        if(custid) existingUser.custid = custid;\r\n        if(firstname) existingUser.firstname = firstname;\r\n        if(lastname) existingUser.lastname = lastname;\r\n        if(email) existingUser.email = email;\r\n        if(cell) existingUser.cell = cell;\r\n        if(addr1) existingUser.addr1 = addr1;\r\n        if(addr2) existingUser.addr2 = addr2;\r\n        if(city) existingUser.city = city;\r\n        if(st) existingUser.st = st;\r\n        if(zip) existingUser.zip = zip;\r\n        if(usertype) existingUser.usertype = usertype;\r\n      }\r\n    },\r\n    \r\n    updateCustidState: (state, action) => {\r\n      const{affectedRows, fieldCount, info, insertId, serverStatus, warningStatus} = action.payload;\r\n      console.log(`action.payload: `,action.payload);\r\n      let custid = insertId; \r\n      const existingUser = state.user;\r\n      if(existingUser) {\r\n        existingUser.custid = custid;\r\n      }\r\n    },\r\n\r\n    updateIsLoggedInState: (state, action) => {\r\n      const{isLoggedIn} = action.payload;\r\n      const existingUser = state.user;\r\n      if(existingUser){\r\n        if(isLoggedIn) \r\n          existingUser.isLoggedIn = isLoggedIn;\r\n      }\r\n    },\r\n\r\n  resetUserState: (state, action) => {\r\n    return initialState;\r\n  },\r\n}\r\n\r\n});\r\n\r\n// Action creators generated for each reducer function\r\nexport const { addNewCustidState, updateUserState, updateCustidState, updateIsLoggedInState, resetUserState } = userSlice.actions;\r\n\r\nexport default userSlice.reducer;\r\n\r\nexport const selectCurrentUser = state => state.user.user;\r\nexport const selectUserEmail = state => state.user.user.email;\r\nexport const selectUserCell = state => state.user.user.cell;\r\nexport const selectUserCustid = state => state.user.user.custid;\r\n"
    },
    {
      "file": "dashboard/src/app/pages/Login.js",
      "description": "# Login.js\r\n## Example of using Redux Toolkit to log a user in and store their data in Redux state. \r\n\r\n## Login, Logout, Change Password, Forgot Password don't use the apiSlice to query the database. \r\n\r\n## These security actions are handled through Passport redirects in Express.\r\n\r\n- ### import useDispatch and useSelector\r\n- ### import the actions and queries you need to use to login and update **userSlice**\r\n",
      "line": 15,
      "contents": "import React, { useState } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { useSnackbar } from 'notistack';\r\nimport { useFormik } from 'formik';\r\nimport * as Yup from 'yup';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport { DoLogin } from 'app/components/AuthCrud';\r\nimport { Logout } from 'app/pages/Logout';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { \r\n  updateUserState,\r\n  updateIsLoggedInState,\r\n  selectCurrentUser, \r\n} from 'app/redux/userSlice';\r\n\r\nconst initialValues = {\r\n  email: '',\r\n  pwd: '',\r\n};\r\n\r\nexport function Login() {\r\n  let currentUser = useSelector(selectCurrentUser);\r\n  const [loading, setLoading] = useState(false);\r\n  const history = useHistory();\r\n  const { enqueueSnackbar,  } = useSnackbar();\r\n  const dispatch = useDispatch();\r\n\r\n    if(document.cookie.startsWith('connect.sid')) {\r\n      dispatch(updateIsLoggedInState(1));\r\n    } else {\r\n        dispatch(updateIsLoggedInState(0));\r\n      }\r\n\r\n  const goToDashboard = () => {\r\n    history.push({\r\n      pathname: '/dashboard', \r\n    });\r\n  };\r\n\r\n  const LoginSchema = Yup.object().shape({\r\n    email: Yup.string()\r\n      .email('Wrong email format')\r\n      .min(3, 'Minimum 3 symbols')\r\n      .max(50, 'Maximum 50 symbols')\r\n      .required('Required field'),\r\n    pwd: Yup.string()\r\n      .min(8, 'Minimum 8 symbols')\r\n      .max(50, 'Maximum 50 symbols')\r\n      .required('Required Field'),\r\n  });\r\n\r\n  const enableLoading = () => {\r\n    setLoading(true);\r\n  };\r\n\r\n  const disableLoading = () => {\r\n    setLoading(false);\r\n  };\r\n\r\n  const getInputClasses = fieldname => {\r\n    if (formik.touched[fieldname] && formik.errors[fieldname]) {\r\n      return 'is-invalid';\r\n    }\r\n    if (formik.touched[fieldname] && !formik.errors[fieldname]) {\r\n      return 'is-valid';\r\n    }\r\n    return '';\r\n  };\r\n\r\n  const formik = useFormik({\r\n    initialValues,\r\n    validationSchema: LoginSchema,\r\n    onSubmit: (values, { resetForm }) => {\r\n      enableLoading();\r\n      GetData(values);\r\n      \r\n    },\r\n  });\r\n\r\n  // values = email, pwd\r\n  async function GetData(values) {\r\n    await DoLogin(values)\r\n      .then(data => {\r\n        if (data.custid) {\r\n          disableLoading();\r\n          enqueueSnackbar('You are logged in', { \r\n            variant: 'success',\r\n          });\r\n          const newState = 1;\r\n           dispatch(updateUserState({...data, isLoggedIn: newState}));\r\n           console.log(`Login currentUser: `, currentUser);\r\n           formik.resetForm();\r\n        } \r\n        else {\r\n          enqueueSnackbar('Login failed...', { \r\n           variant: 'error',\r\n          });\r\n          dispatch(updateIsLoggedInState(0));\r\n        };\r\n       })\r\n      .catch(e => {\r\n        console.log(`login error e: `, e);\r\n        dispatch(updateIsLoggedInState(0));\r\n      })\r\n      .finally(() => {\r\n        disableLoading();\r\n        formik.setSubmitting(false);\r\n      });\r\n  }\r\n\r\n  return (\r\n    <div id=\"kt_body\" className=\"quick-panel-right demo-panel-right offcanvas-right header-fixed header-mobile-fixed subheader-enabled subheader-fixed aside-enabled aside-fixed aside-minimize-hoverable brand-dark\">\r\n      <div className=\"d-flex flex-column flex-root\">\r\n        {/*begin::Login*/}\r\n        <div \r\n          className=\"login login-1 login-signin-on d-flex flex-column flex-lg-row flex-column-fluid bg-white\"\r\n          id=\"kt_login\">\r\n          {/*begin::Aside*/}\r\n          <div\r\n            className=\"login-aside d-flex flex-row-auto bgi-size-cover bgi-no-repeat p-10 p-lg-10\"\r\n            style={{\r\n              height: '100vh',\r\n              backgroundImage: `url('/media/a4g/a4g-splash300-20.png')`,\r\n            \r\n            }}>\r\n            {/*begin: Aside Container*/}\r\n            <div className=\"d-flex flex-row-fluid flex-column justify-content-between\">\r\n              {/* start:: Aside header */}\r\n              <Link to=\"/\" className=\"flex-column-auto mt-5 pb-lg-0 pb-10\">\r\n                <img\r\n                  alt=\"Logo\"\r\n                  className=\"max-h-70px\"\r\n                  src=\"/media/a4g/a4g-logo-white.png\"\r\n                />\r\n              </Link>\r\n              {/* end:: Aside header */}\r\n\r\n              {/* start:: Aside content */}\r\n              <div\r\n                className=\"flex-column-fluid d-flex flex-column justify-content-center\"\r\n                style={{ color: '#65696e' }}>\r\n                <h3 className=\"font-size-h1 mb-5 mt-10\">\r\n                  Welcome to Alerts for Good!\r\n                </h3>\r\n                <p className=\"font-weight-bold opacity-95\">\r\n                  Our Mission is to promote public safety, community action, and\r\n                  well-being through subscription based alerts.\r\n                </p>\r\n              </div>\r\n              {/* end:: Aside content */}\r\n\r\n              {/* start:: Aside footer for desktop */}\r\n              <div className=\"d-none flex-column-auto d-lg-flex justify-content-between mt-10\">\r\n                <div className=\"opacity-95 font-weight-bold\" style={{ color: '#abb2ba'}}>\r\n                  &copy; 2021 Alerts for Good\r\n                </div>\r\n                <div className=\"d-flex\">\r\n                \r\n                  <a href=\"https://alertsforgood.org/volunteer\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"ml-10\">\r\n                    Volunteer\r\n                  </a>\r\n                  <a href=\"https://alertsforgood.org/donate\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"ml-10\">\r\n                    Donate\r\n                  </a>\r\n                  <a href=\"https://alertsforgood.org/about\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"ml-10\">\r\n                    About\r\n                  </a>    \r\n                </div>\r\n              </div>\r\n              {/* end:: Aside footer for desktop */}\r\n            </div>\r\n            {/*end: Aside Container*/}\r\n          </div>\r\n          {/*begin::Aside*/}\r\n\r\n          <div className=\"d-flex flex-column flex-row-fluid position-relative p-7 overflow-hidden \">\r\n            <div className=\"d-flex flex-column-fluid flex-center mt-0\">\r\n              <div\r\n                className=\"login-form login-signin\"\r\n                id=\"kt_login_signin_form\">\r\n                {/* begin::Head */}\r\n                <div className=\"text-center mb-10 mb-lg-20\">\r\n                  <h3 className=\"font-size-h1\"style={{ color: '#65696e' }}>\r\n                    Login\r\n                  </h3>\r\n                  <p className=\"text-muted font-weight-bold\">\r\n                    Login with your email address and password<br/><br/>\r\n                    Use admin@admin.com  adminadmin<br/>\r\n                    Or click 'Sign Up' to create an account\r\n                  </p>\r\n                </div>\r\n                {/* end::Head */}\r\n\r\n                {/*begin::Form*/}\r\n                <form\r\n                  onSubmit={formik.handleSubmit}\r\n                  className=\"form fv-plugins-bootstrap fv-plugins-framework\">\r\n                  <div className=\"form-group fv-plugins-icon-container\">\r\n                    <input\r\n                      placeholder=\"Email\"\r\n                      type=\"email\"\r\n                      className={`form-control form-control-solid h-auto py-5 px-6 ${getInputClasses(\r\n                        'email'\r\n                      )}`}\r\n                      name=\"email\"\r\n                      {...formik.getFieldProps('email')}\r\n                    />\r\n                    {formik.touched.email && formik.errors.email ? (\r\n                      <div className=\"fv-plugins-message-container\">\r\n                        <div className=\"fv-help-block\">\r\n                          {formik.errors.email}\r\n                        </div>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                  <div className=\"form-group fv-plugins-icon-container\">\r\n                    <input\r\n                      placeholder=\"Password\"\r\n                      type=\"password\"\r\n                      className={`form-control form-control-solid h-auto py-5 px-6 ${getInputClasses(\r\n                        'pwd'\r\n                      )}`}\r\n                      name=\"pwd\"\r\n                      {...formik.getFieldProps('pwd')}\r\n                    />\r\n                    {formik.touched.pwd && formik.errors.pwd ? (\r\n                      <div className=\"fv-plugins-message-container\">\r\n                        <div className=\"fv-help-block\">{formik.errors.pwd}</div>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                  <div className=\"form-group d-flex flex-wrap justify-content-between align-items-center\">\r\n\r\n                    {currentUser.isLoggedIn === 1 ? (\r\n                      <div>\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={goToDashboard}\r\n                          id=\"kt-profile\"\r\n                          className={`btn btn-warning font-weight-bold px-9 py-4 my-3 mr-20`}>\r\n                          <span>Dashboard</span>\r\n                        </button>\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={Logout}\r\n                          id=\"kt_logout_signout_submit\"\r\n                          className={`btn btn-warning font-weight-bold px-9 py-4 my-3 `}>\r\n                          <span>Logout</span>\r\n                        </button>\r\n                        {/* <AmplifySignOut /> */}\r\n                      </div>\r\n                    ) : (\r\n                      <div>\r\n                        <Link\r\n                          to=\"/auth/forgot-password\"\r\n                          className=\"text-dark-50 text-hover-primary my-3 mr-20\"\r\n                          id=\"kt_login_forgot\">\r\n                          <FormattedMessage id=\"AUTH.GENERAL.FORGOT_BUTTON\" />\r\n                        </Link>\r\n                        <button\r\n                          id=\"kt_login_signin_submit\"\r\n                          type=\"submit\"\r\n                          onSubmit={formik.handleReset}\r\n                          disabled={formik.isSubmitting}\r\n                          className={`btn btn-warning font-weight-bold text-dark px-9 py-4 mr-0 my-3 `}>\r\n                          <span>Login</span>\r\n                          {loading && (\r\n                            <span className=\"ml-3 spinner spinner-white\"></span>\r\n                          )}\r\n                        </button>\r\n\r\n                        <div className=\"position-relative top-0 right-0 text-right mt-5 mb-15 mb-lg-0 flex-column-auto justify-content-center py-5 px-10\">\r\n                          <span className=\"font-weight-bold text-dark-50\">\r\n                            Don't have an account yet?\r\n                          </span>\r\n                          <Link\r\n                            to=\"/auth/profilestepper\"\r\n                            className=\"font-weight-bold ml-2\"\r\n                            id=\"kt_login_signup\">\r\n                            Sign Up!\r\n                          </Link>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </form>\r\n                {/*end::Form*/}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default Login;\r\n"
    },
    {
      "file": "dashboard/src/app/pages/Login.js",
      "description": "# Login.js\r\n- ## Read *currentUser* from *userSlice*. It will be empty if they aren't logged in already.",
      "line": 22,
      "contents": "import React, { useState } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { useSnackbar } from 'notistack';\r\nimport { useFormik } from 'formik';\r\nimport * as Yup from 'yup';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport { DoLogin } from 'app/components/AuthCrud';\r\nimport { Logout } from 'app/pages/Logout';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { \r\n  updateUserState,\r\n  updateIsLoggedInState,\r\n  selectCurrentUser, \r\n} from 'app/redux/userSlice';\r\n\r\nconst initialValues = {\r\n  email: '',\r\n  pwd: '',\r\n};\r\n\r\nexport function Login() {\r\n  let currentUser = useSelector(selectCurrentUser);\r\n  const [loading, setLoading] = useState(false);\r\n  const history = useHistory();\r\n  const { enqueueSnackbar,  } = useSnackbar();\r\n  const dispatch = useDispatch();\r\n\r\n    if(document.cookie.startsWith('connect.sid')) {\r\n      dispatch(updateIsLoggedInState(1));\r\n    } else {\r\n        dispatch(updateIsLoggedInState(0));\r\n      }\r\n\r\n  const goToDashboard = () => {\r\n    history.push({\r\n      pathname: '/dashboard', \r\n    });\r\n  };\r\n\r\n  const LoginSchema = Yup.object().shape({\r\n    email: Yup.string()\r\n      .email('Wrong email format')\r\n      .min(3, 'Minimum 3 symbols')\r\n      .max(50, 'Maximum 50 symbols')\r\n      .required('Required field'),\r\n    pwd: Yup.string()\r\n      .min(8, 'Minimum 8 symbols')\r\n      .max(50, 'Maximum 50 symbols')\r\n      .required('Required Field'),\r\n  });\r\n\r\n  const enableLoading = () => {\r\n    setLoading(true);\r\n  };\r\n\r\n  const disableLoading = () => {\r\n    setLoading(false);\r\n  };\r\n\r\n  const getInputClasses = fieldname => {\r\n    if (formik.touched[fieldname] && formik.errors[fieldname]) {\r\n      return 'is-invalid';\r\n    }\r\n    if (formik.touched[fieldname] && !formik.errors[fieldname]) {\r\n      return 'is-valid';\r\n    }\r\n    return '';\r\n  };\r\n\r\n  const formik = useFormik({\r\n    initialValues,\r\n    validationSchema: LoginSchema,\r\n    onSubmit: (values, { resetForm }) => {\r\n      enableLoading();\r\n      GetData(values);\r\n      \r\n    },\r\n  });\r\n\r\n  // values = email, pwd\r\n  async function GetData(values) {\r\n    await DoLogin(values)\r\n      .then(data => {\r\n        if (data.custid) {\r\n          disableLoading();\r\n          enqueueSnackbar('You are logged in', { \r\n            variant: 'success',\r\n          });\r\n          const newState = 1;\r\n           dispatch(updateUserState({...data, isLoggedIn: newState}));\r\n           console.log(`Login currentUser: `, currentUser);\r\n           formik.resetForm();\r\n        } \r\n        else {\r\n          enqueueSnackbar('Login failed...', { \r\n           variant: 'error',\r\n          });\r\n          dispatch(updateIsLoggedInState(0));\r\n        };\r\n       })\r\n      .catch(e => {\r\n        console.log(`login error e: `, e);\r\n        dispatch(updateIsLoggedInState(0));\r\n      })\r\n      .finally(() => {\r\n        disableLoading();\r\n        formik.setSubmitting(false);\r\n      });\r\n  }\r\n\r\n  return (\r\n    <div id=\"kt_body\" className=\"quick-panel-right demo-panel-right offcanvas-right header-fixed header-mobile-fixed subheader-enabled subheader-fixed aside-enabled aside-fixed aside-minimize-hoverable brand-dark\">\r\n      <div className=\"d-flex flex-column flex-root\">\r\n        {/*begin::Login*/}\r\n        <div \r\n          className=\"login login-1 login-signin-on d-flex flex-column flex-lg-row flex-column-fluid bg-white\"\r\n          id=\"kt_login\">\r\n          {/*begin::Aside*/}\r\n          <div\r\n            className=\"login-aside d-flex flex-row-auto bgi-size-cover bgi-no-repeat p-10 p-lg-10\"\r\n            style={{\r\n              height: '100vh',\r\n              backgroundImage: `url('/media/a4g/a4g-splash300-20.png')`,\r\n            \r\n            }}>\r\n            {/*begin: Aside Container*/}\r\n            <div className=\"d-flex flex-row-fluid flex-column justify-content-between\">\r\n              {/* start:: Aside header */}\r\n              <Link to=\"/\" className=\"flex-column-auto mt-5 pb-lg-0 pb-10\">\r\n                <img\r\n                  alt=\"Logo\"\r\n                  className=\"max-h-70px\"\r\n                  src=\"/media/a4g/a4g-logo-white.png\"\r\n                />\r\n              </Link>\r\n              {/* end:: Aside header */}\r\n\r\n              {/* start:: Aside content */}\r\n              <div\r\n                className=\"flex-column-fluid d-flex flex-column justify-content-center\"\r\n                style={{ color: '#65696e' }}>\r\n                <h3 className=\"font-size-h1 mb-5 mt-10\">\r\n                  Welcome to Alerts for Good!\r\n                </h3>\r\n                <p className=\"font-weight-bold opacity-95\">\r\n                  Our Mission is to promote public safety, community action, and\r\n                  well-being through subscription based alerts.\r\n                </p>\r\n              </div>\r\n              {/* end:: Aside content */}\r\n\r\n              {/* start:: Aside footer for desktop */}\r\n              <div className=\"d-none flex-column-auto d-lg-flex justify-content-between mt-10\">\r\n                <div className=\"opacity-95 font-weight-bold\" style={{ color: '#abb2ba'}}>\r\n                  &copy; 2021 Alerts for Good\r\n                </div>\r\n                <div className=\"d-flex\">\r\n                \r\n                  <a href=\"https://alertsforgood.org/volunteer\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"ml-10\">\r\n                    Volunteer\r\n                  </a>\r\n                  <a href=\"https://alertsforgood.org/donate\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"ml-10\">\r\n                    Donate\r\n                  </a>\r\n                  <a href=\"https://alertsforgood.org/about\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"ml-10\">\r\n                    About\r\n                  </a>    \r\n                </div>\r\n              </div>\r\n              {/* end:: Aside footer for desktop */}\r\n            </div>\r\n            {/*end: Aside Container*/}\r\n          </div>\r\n          {/*begin::Aside*/}\r\n\r\n          <div className=\"d-flex flex-column flex-row-fluid position-relative p-7 overflow-hidden \">\r\n            <div className=\"d-flex flex-column-fluid flex-center mt-0\">\r\n              <div\r\n                className=\"login-form login-signin\"\r\n                id=\"kt_login_signin_form\">\r\n                {/* begin::Head */}\r\n                <div className=\"text-center mb-10 mb-lg-20\">\r\n                  <h3 className=\"font-size-h1\"style={{ color: '#65696e' }}>\r\n                    Login\r\n                  </h3>\r\n                  <p className=\"text-muted font-weight-bold\">\r\n                    Login with your email address and password<br/><br/>\r\n                    Use admin@admin.com  adminadmin<br/>\r\n                    Or click 'Sign Up' to create an account\r\n                  </p>\r\n                </div>\r\n                {/* end::Head */}\r\n\r\n                {/*begin::Form*/}\r\n                <form\r\n                  onSubmit={formik.handleSubmit}\r\n                  className=\"form fv-plugins-bootstrap fv-plugins-framework\">\r\n                  <div className=\"form-group fv-plugins-icon-container\">\r\n                    <input\r\n                      placeholder=\"Email\"\r\n                      type=\"email\"\r\n                      className={`form-control form-control-solid h-auto py-5 px-6 ${getInputClasses(\r\n                        'email'\r\n                      )}`}\r\n                      name=\"email\"\r\n                      {...formik.getFieldProps('email')}\r\n                    />\r\n                    {formik.touched.email && formik.errors.email ? (\r\n                      <div className=\"fv-plugins-message-container\">\r\n                        <div className=\"fv-help-block\">\r\n                          {formik.errors.email}\r\n                        </div>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                  <div className=\"form-group fv-plugins-icon-container\">\r\n                    <input\r\n                      placeholder=\"Password\"\r\n                      type=\"password\"\r\n                      className={`form-control form-control-solid h-auto py-5 px-6 ${getInputClasses(\r\n                        'pwd'\r\n                      )}`}\r\n                      name=\"pwd\"\r\n                      {...formik.getFieldProps('pwd')}\r\n                    />\r\n                    {formik.touched.pwd && formik.errors.pwd ? (\r\n                      <div className=\"fv-plugins-message-container\">\r\n                        <div className=\"fv-help-block\">{formik.errors.pwd}</div>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                  <div className=\"form-group d-flex flex-wrap justify-content-between align-items-center\">\r\n\r\n                    {currentUser.isLoggedIn === 1 ? (\r\n                      <div>\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={goToDashboard}\r\n                          id=\"kt-profile\"\r\n                          className={`btn btn-warning font-weight-bold px-9 py-4 my-3 mr-20`}>\r\n                          <span>Dashboard</span>\r\n                        </button>\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={Logout}\r\n                          id=\"kt_logout_signout_submit\"\r\n                          className={`btn btn-warning font-weight-bold px-9 py-4 my-3 `}>\r\n                          <span>Logout</span>\r\n                        </button>\r\n                        {/* <AmplifySignOut /> */}\r\n                      </div>\r\n                    ) : (\r\n                      <div>\r\n                        <Link\r\n                          to=\"/auth/forgot-password\"\r\n                          className=\"text-dark-50 text-hover-primary my-3 mr-20\"\r\n                          id=\"kt_login_forgot\">\r\n                          <FormattedMessage id=\"AUTH.GENERAL.FORGOT_BUTTON\" />\r\n                        </Link>\r\n                        <button\r\n                          id=\"kt_login_signin_submit\"\r\n                          type=\"submit\"\r\n                          onSubmit={formik.handleReset}\r\n                          disabled={formik.isSubmitting}\r\n                          className={`btn btn-warning font-weight-bold text-dark px-9 py-4 mr-0 my-3 `}>\r\n                          <span>Login</span>\r\n                          {loading && (\r\n                            <span className=\"ml-3 spinner spinner-white\"></span>\r\n                          )}\r\n                        </button>\r\n\r\n                        <div className=\"position-relative top-0 right-0 text-right mt-5 mb-15 mb-lg-0 flex-column-auto justify-content-center py-5 px-10\">\r\n                          <span className=\"font-weight-bold text-dark-50\">\r\n                            Don't have an account yet?\r\n                          </span>\r\n                          <Link\r\n                            to=\"/auth/profilestepper\"\r\n                            className=\"font-weight-bold ml-2\"\r\n                            id=\"kt_login_signup\">\r\n                            Sign Up!\r\n                          </Link>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </form>\r\n                {/*end::Form*/}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default Login;\r\n"
    },
    {
      "file": "dashboard/src/app/pages/Login.js",
      "description": "# Login.js\r\n- ## Passport will create a cookie if the user is logged in.",
      "line": 32,
      "contents": "import React, { useState } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { useSnackbar } from 'notistack';\r\nimport { useFormik } from 'formik';\r\nimport * as Yup from 'yup';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport { DoLogin } from 'app/components/AuthCrud';\r\nimport { Logout } from 'app/pages/Logout';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { \r\n  updateUserState,\r\n  updateIsLoggedInState,\r\n  selectCurrentUser, \r\n} from 'app/redux/userSlice';\r\n\r\nconst initialValues = {\r\n  email: '',\r\n  pwd: '',\r\n};\r\n\r\nexport function Login() {\r\n  let currentUser = useSelector(selectCurrentUser);\r\n  const [loading, setLoading] = useState(false);\r\n  const history = useHistory();\r\n  const { enqueueSnackbar,  } = useSnackbar();\r\n  const dispatch = useDispatch();\r\n\r\n    if(document.cookie.startsWith('connect.sid')) {\r\n      dispatch(updateIsLoggedInState(1));\r\n    } else {\r\n        dispatch(updateIsLoggedInState(0));\r\n      }\r\n\r\n  const goToDashboard = () => {\r\n    history.push({\r\n      pathname: '/dashboard', \r\n    });\r\n  };\r\n\r\n  const LoginSchema = Yup.object().shape({\r\n    email: Yup.string()\r\n      .email('Wrong email format')\r\n      .min(3, 'Minimum 3 symbols')\r\n      .max(50, 'Maximum 50 symbols')\r\n      .required('Required field'),\r\n    pwd: Yup.string()\r\n      .min(8, 'Minimum 8 symbols')\r\n      .max(50, 'Maximum 50 symbols')\r\n      .required('Required Field'),\r\n  });\r\n\r\n  const enableLoading = () => {\r\n    setLoading(true);\r\n  };\r\n\r\n  const disableLoading = () => {\r\n    setLoading(false);\r\n  };\r\n\r\n  const getInputClasses = fieldname => {\r\n    if (formik.touched[fieldname] && formik.errors[fieldname]) {\r\n      return 'is-invalid';\r\n    }\r\n    if (formik.touched[fieldname] && !formik.errors[fieldname]) {\r\n      return 'is-valid';\r\n    }\r\n    return '';\r\n  };\r\n\r\n  const formik = useFormik({\r\n    initialValues,\r\n    validationSchema: LoginSchema,\r\n    onSubmit: (values, { resetForm }) => {\r\n      enableLoading();\r\n      GetData(values);\r\n      \r\n    },\r\n  });\r\n\r\n  // values = email, pwd\r\n  async function GetData(values) {\r\n    await DoLogin(values)\r\n      .then(data => {\r\n        if (data.custid) {\r\n          disableLoading();\r\n          enqueueSnackbar('You are logged in', { \r\n            variant: 'success',\r\n          });\r\n          const newState = 1;\r\n           dispatch(updateUserState({...data, isLoggedIn: newState}));\r\n           console.log(`Login currentUser: `, currentUser);\r\n           formik.resetForm();\r\n        } \r\n        else {\r\n          enqueueSnackbar('Login failed...', { \r\n           variant: 'error',\r\n          });\r\n          dispatch(updateIsLoggedInState(0));\r\n        };\r\n       })\r\n      .catch(e => {\r\n        console.log(`login error e: `, e);\r\n        dispatch(updateIsLoggedInState(0));\r\n      })\r\n      .finally(() => {\r\n        disableLoading();\r\n        formik.setSubmitting(false);\r\n      });\r\n  }\r\n\r\n  return (\r\n    <div id=\"kt_body\" className=\"quick-panel-right demo-panel-right offcanvas-right header-fixed header-mobile-fixed subheader-enabled subheader-fixed aside-enabled aside-fixed aside-minimize-hoverable brand-dark\">\r\n      <div className=\"d-flex flex-column flex-root\">\r\n        {/*begin::Login*/}\r\n        <div \r\n          className=\"login login-1 login-signin-on d-flex flex-column flex-lg-row flex-column-fluid bg-white\"\r\n          id=\"kt_login\">\r\n          {/*begin::Aside*/}\r\n          <div\r\n            className=\"login-aside d-flex flex-row-auto bgi-size-cover bgi-no-repeat p-10 p-lg-10\"\r\n            style={{\r\n              height: '100vh',\r\n              backgroundImage: `url('/media/a4g/a4g-splash300-20.png')`,\r\n            \r\n            }}>\r\n            {/*begin: Aside Container*/}\r\n            <div className=\"d-flex flex-row-fluid flex-column justify-content-between\">\r\n              {/* start:: Aside header */}\r\n              <Link to=\"/\" className=\"flex-column-auto mt-5 pb-lg-0 pb-10\">\r\n                <img\r\n                  alt=\"Logo\"\r\n                  className=\"max-h-70px\"\r\n                  src=\"/media/a4g/a4g-logo-white.png\"\r\n                />\r\n              </Link>\r\n              {/* end:: Aside header */}\r\n\r\n              {/* start:: Aside content */}\r\n              <div\r\n                className=\"flex-column-fluid d-flex flex-column justify-content-center\"\r\n                style={{ color: '#65696e' }}>\r\n                <h3 className=\"font-size-h1 mb-5 mt-10\">\r\n                  Welcome to Alerts for Good!\r\n                </h3>\r\n                <p className=\"font-weight-bold opacity-95\">\r\n                  Our Mission is to promote public safety, community action, and\r\n                  well-being through subscription based alerts.\r\n                </p>\r\n              </div>\r\n              {/* end:: Aside content */}\r\n\r\n              {/* start:: Aside footer for desktop */}\r\n              <div className=\"d-none flex-column-auto d-lg-flex justify-content-between mt-10\">\r\n                <div className=\"opacity-95 font-weight-bold\" style={{ color: '#abb2ba'}}>\r\n                  &copy; 2021 Alerts for Good\r\n                </div>\r\n                <div className=\"d-flex\">\r\n                \r\n                  <a href=\"https://alertsforgood.org/volunteer\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"ml-10\">\r\n                    Volunteer\r\n                  </a>\r\n                  <a href=\"https://alertsforgood.org/donate\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"ml-10\">\r\n                    Donate\r\n                  </a>\r\n                  <a href=\"https://alertsforgood.org/about\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"ml-10\">\r\n                    About\r\n                  </a>    \r\n                </div>\r\n              </div>\r\n              {/* end:: Aside footer for desktop */}\r\n            </div>\r\n            {/*end: Aside Container*/}\r\n          </div>\r\n          {/*begin::Aside*/}\r\n\r\n          <div className=\"d-flex flex-column flex-row-fluid position-relative p-7 overflow-hidden \">\r\n            <div className=\"d-flex flex-column-fluid flex-center mt-0\">\r\n              <div\r\n                className=\"login-form login-signin\"\r\n                id=\"kt_login_signin_form\">\r\n                {/* begin::Head */}\r\n                <div className=\"text-center mb-10 mb-lg-20\">\r\n                  <h3 className=\"font-size-h1\"style={{ color: '#65696e' }}>\r\n                    Login\r\n                  </h3>\r\n                  <p className=\"text-muted font-weight-bold\">\r\n                    Login with your email address and password<br/><br/>\r\n                    Use admin@admin.com  adminadmin<br/>\r\n                    Or click 'Sign Up' to create an account\r\n                  </p>\r\n                </div>\r\n                {/* end::Head */}\r\n\r\n                {/*begin::Form*/}\r\n                <form\r\n                  onSubmit={formik.handleSubmit}\r\n                  className=\"form fv-plugins-bootstrap fv-plugins-framework\">\r\n                  <div className=\"form-group fv-plugins-icon-container\">\r\n                    <input\r\n                      placeholder=\"Email\"\r\n                      type=\"email\"\r\n                      className={`form-control form-control-solid h-auto py-5 px-6 ${getInputClasses(\r\n                        'email'\r\n                      )}`}\r\n                      name=\"email\"\r\n                      {...formik.getFieldProps('email')}\r\n                    />\r\n                    {formik.touched.email && formik.errors.email ? (\r\n                      <div className=\"fv-plugins-message-container\">\r\n                        <div className=\"fv-help-block\">\r\n                          {formik.errors.email}\r\n                        </div>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                  <div className=\"form-group fv-plugins-icon-container\">\r\n                    <input\r\n                      placeholder=\"Password\"\r\n                      type=\"password\"\r\n                      className={`form-control form-control-solid h-auto py-5 px-6 ${getInputClasses(\r\n                        'pwd'\r\n                      )}`}\r\n                      name=\"pwd\"\r\n                      {...formik.getFieldProps('pwd')}\r\n                    />\r\n                    {formik.touched.pwd && formik.errors.pwd ? (\r\n                      <div className=\"fv-plugins-message-container\">\r\n                        <div className=\"fv-help-block\">{formik.errors.pwd}</div>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                  <div className=\"form-group d-flex flex-wrap justify-content-between align-items-center\">\r\n\r\n                    {currentUser.isLoggedIn === 1 ? (\r\n                      <div>\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={goToDashboard}\r\n                          id=\"kt-profile\"\r\n                          className={`btn btn-warning font-weight-bold px-9 py-4 my-3 mr-20`}>\r\n                          <span>Dashboard</span>\r\n                        </button>\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={Logout}\r\n                          id=\"kt_logout_signout_submit\"\r\n                          className={`btn btn-warning font-weight-bold px-9 py-4 my-3 `}>\r\n                          <span>Logout</span>\r\n                        </button>\r\n                        {/* <AmplifySignOut /> */}\r\n                      </div>\r\n                    ) : (\r\n                      <div>\r\n                        <Link\r\n                          to=\"/auth/forgot-password\"\r\n                          className=\"text-dark-50 text-hover-primary my-3 mr-20\"\r\n                          id=\"kt_login_forgot\">\r\n                          <FormattedMessage id=\"AUTH.GENERAL.FORGOT_BUTTON\" />\r\n                        </Link>\r\n                        <button\r\n                          id=\"kt_login_signin_submit\"\r\n                          type=\"submit\"\r\n                          onSubmit={formik.handleReset}\r\n                          disabled={formik.isSubmitting}\r\n                          className={`btn btn-warning font-weight-bold text-dark px-9 py-4 mr-0 my-3 `}>\r\n                          <span>Login</span>\r\n                          {loading && (\r\n                            <span className=\"ml-3 spinner spinner-white\"></span>\r\n                          )}\r\n                        </button>\r\n\r\n                        <div className=\"position-relative top-0 right-0 text-right mt-5 mb-15 mb-lg-0 flex-column-auto justify-content-center py-5 px-10\">\r\n                          <span className=\"font-weight-bold text-dark-50\">\r\n                            Don't have an account yet?\r\n                          </span>\r\n                          <Link\r\n                            to=\"/auth/profilestepper\"\r\n                            className=\"font-weight-bold ml-2\"\r\n                            id=\"kt_login_signup\">\r\n                            Sign Up!\r\n                          </Link>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </form>\r\n                {/*end::Form*/}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default Login;\r\n"
    },
    {
      "file": "dashboard/src/app/pages/Login.js",
      "description": "# Login.js\r\n- ## Call hand-written *DoLogin* function from *AuthCrud.js* to handle login and bypass RTK Query.",
      "line": 82,
      "contents": "import React, { useState } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { useSnackbar } from 'notistack';\r\nimport { useFormik } from 'formik';\r\nimport * as Yup from 'yup';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport { DoLogin } from 'app/components/AuthCrud';\r\nimport { Logout } from 'app/pages/Logout';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { \r\n  updateUserState,\r\n  updateIsLoggedInState,\r\n  selectCurrentUser, \r\n} from 'app/redux/userSlice';\r\n\r\nconst initialValues = {\r\n  email: '',\r\n  pwd: '',\r\n};\r\n\r\nexport function Login() {\r\n  let currentUser = useSelector(selectCurrentUser);\r\n  const [loading, setLoading] = useState(false);\r\n  const history = useHistory();\r\n  const { enqueueSnackbar,  } = useSnackbar();\r\n  const dispatch = useDispatch();\r\n\r\n    if(document.cookie.startsWith('connect.sid')) {\r\n      dispatch(updateIsLoggedInState(1));\r\n    } else {\r\n        dispatch(updateIsLoggedInState(0));\r\n      }\r\n\r\n  const goToDashboard = () => {\r\n    history.push({\r\n      pathname: '/dashboard', \r\n    });\r\n  };\r\n\r\n  const LoginSchema = Yup.object().shape({\r\n    email: Yup.string()\r\n      .email('Wrong email format')\r\n      .min(3, 'Minimum 3 symbols')\r\n      .max(50, 'Maximum 50 symbols')\r\n      .required('Required field'),\r\n    pwd: Yup.string()\r\n      .min(8, 'Minimum 8 symbols')\r\n      .max(50, 'Maximum 50 symbols')\r\n      .required('Required Field'),\r\n  });\r\n\r\n  const enableLoading = () => {\r\n    setLoading(true);\r\n  };\r\n\r\n  const disableLoading = () => {\r\n    setLoading(false);\r\n  };\r\n\r\n  const getInputClasses = fieldname => {\r\n    if (formik.touched[fieldname] && formik.errors[fieldname]) {\r\n      return 'is-invalid';\r\n    }\r\n    if (formik.touched[fieldname] && !formik.errors[fieldname]) {\r\n      return 'is-valid';\r\n    }\r\n    return '';\r\n  };\r\n\r\n  const formik = useFormik({\r\n    initialValues,\r\n    validationSchema: LoginSchema,\r\n    onSubmit: (values, { resetForm }) => {\r\n      enableLoading();\r\n      GetData(values);\r\n      \r\n    },\r\n  });\r\n\r\n  // values = email, pwd\r\n  async function GetData(values) {\r\n    await DoLogin(values)\r\n      .then(data => {\r\n        if (data.custid) {\r\n          disableLoading();\r\n          enqueueSnackbar('You are logged in', { \r\n            variant: 'success',\r\n          });\r\n          const newState = 1;\r\n           dispatch(updateUserState({...data, isLoggedIn: newState}));\r\n           console.log(`Login currentUser: `, currentUser);\r\n           formik.resetForm();\r\n        } \r\n        else {\r\n          enqueueSnackbar('Login failed...', { \r\n           variant: 'error',\r\n          });\r\n          dispatch(updateIsLoggedInState(0));\r\n        };\r\n       })\r\n      .catch(e => {\r\n        console.log(`login error e: `, e);\r\n        dispatch(updateIsLoggedInState(0));\r\n      })\r\n      .finally(() => {\r\n        disableLoading();\r\n        formik.setSubmitting(false);\r\n      });\r\n  }\r\n\r\n  return (\r\n    <div id=\"kt_body\" className=\"quick-panel-right demo-panel-right offcanvas-right header-fixed header-mobile-fixed subheader-enabled subheader-fixed aside-enabled aside-fixed aside-minimize-hoverable brand-dark\">\r\n      <div className=\"d-flex flex-column flex-root\">\r\n        {/*begin::Login*/}\r\n        <div \r\n          className=\"login login-1 login-signin-on d-flex flex-column flex-lg-row flex-column-fluid bg-white\"\r\n          id=\"kt_login\">\r\n          {/*begin::Aside*/}\r\n          <div\r\n            className=\"login-aside d-flex flex-row-auto bgi-size-cover bgi-no-repeat p-10 p-lg-10\"\r\n            style={{\r\n              height: '100vh',\r\n              backgroundImage: `url('/media/a4g/a4g-splash300-20.png')`,\r\n            \r\n            }}>\r\n            {/*begin: Aside Container*/}\r\n            <div className=\"d-flex flex-row-fluid flex-column justify-content-between\">\r\n              {/* start:: Aside header */}\r\n              <Link to=\"/\" className=\"flex-column-auto mt-5 pb-lg-0 pb-10\">\r\n                <img\r\n                  alt=\"Logo\"\r\n                  className=\"max-h-70px\"\r\n                  src=\"/media/a4g/a4g-logo-white.png\"\r\n                />\r\n              </Link>\r\n              {/* end:: Aside header */}\r\n\r\n              {/* start:: Aside content */}\r\n              <div\r\n                className=\"flex-column-fluid d-flex flex-column justify-content-center\"\r\n                style={{ color: '#65696e' }}>\r\n                <h3 className=\"font-size-h1 mb-5 mt-10\">\r\n                  Welcome to Alerts for Good!\r\n                </h3>\r\n                <p className=\"font-weight-bold opacity-95\">\r\n                  Our Mission is to promote public safety, community action, and\r\n                  well-being through subscription based alerts.\r\n                </p>\r\n              </div>\r\n              {/* end:: Aside content */}\r\n\r\n              {/* start:: Aside footer for desktop */}\r\n              <div className=\"d-none flex-column-auto d-lg-flex justify-content-between mt-10\">\r\n                <div className=\"opacity-95 font-weight-bold\" style={{ color: '#abb2ba'}}>\r\n                  &copy; 2021 Alerts for Good\r\n                </div>\r\n                <div className=\"d-flex\">\r\n                \r\n                  <a href=\"https://alertsforgood.org/volunteer\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"ml-10\">\r\n                    Volunteer\r\n                  </a>\r\n                  <a href=\"https://alertsforgood.org/donate\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"ml-10\">\r\n                    Donate\r\n                  </a>\r\n                  <a href=\"https://alertsforgood.org/about\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"ml-10\">\r\n                    About\r\n                  </a>    \r\n                </div>\r\n              </div>\r\n              {/* end:: Aside footer for desktop */}\r\n            </div>\r\n            {/*end: Aside Container*/}\r\n          </div>\r\n          {/*begin::Aside*/}\r\n\r\n          <div className=\"d-flex flex-column flex-row-fluid position-relative p-7 overflow-hidden \">\r\n            <div className=\"d-flex flex-column-fluid flex-center mt-0\">\r\n              <div\r\n                className=\"login-form login-signin\"\r\n                id=\"kt_login_signin_form\">\r\n                {/* begin::Head */}\r\n                <div className=\"text-center mb-10 mb-lg-20\">\r\n                  <h3 className=\"font-size-h1\"style={{ color: '#65696e' }}>\r\n                    Login\r\n                  </h3>\r\n                  <p className=\"text-muted font-weight-bold\">\r\n                    Login with your email address and password<br/><br/>\r\n                    Use admin@admin.com  adminadmin<br/>\r\n                    Or click 'Sign Up' to create an account\r\n                  </p>\r\n                </div>\r\n                {/* end::Head */}\r\n\r\n                {/*begin::Form*/}\r\n                <form\r\n                  onSubmit={formik.handleSubmit}\r\n                  className=\"form fv-plugins-bootstrap fv-plugins-framework\">\r\n                  <div className=\"form-group fv-plugins-icon-container\">\r\n                    <input\r\n                      placeholder=\"Email\"\r\n                      type=\"email\"\r\n                      className={`form-control form-control-solid h-auto py-5 px-6 ${getInputClasses(\r\n                        'email'\r\n                      )}`}\r\n                      name=\"email\"\r\n                      {...formik.getFieldProps('email')}\r\n                    />\r\n                    {formik.touched.email && formik.errors.email ? (\r\n                      <div className=\"fv-plugins-message-container\">\r\n                        <div className=\"fv-help-block\">\r\n                          {formik.errors.email}\r\n                        </div>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                  <div className=\"form-group fv-plugins-icon-container\">\r\n                    <input\r\n                      placeholder=\"Password\"\r\n                      type=\"password\"\r\n                      className={`form-control form-control-solid h-auto py-5 px-6 ${getInputClasses(\r\n                        'pwd'\r\n                      )}`}\r\n                      name=\"pwd\"\r\n                      {...formik.getFieldProps('pwd')}\r\n                    />\r\n                    {formik.touched.pwd && formik.errors.pwd ? (\r\n                      <div className=\"fv-plugins-message-container\">\r\n                        <div className=\"fv-help-block\">{formik.errors.pwd}</div>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                  <div className=\"form-group d-flex flex-wrap justify-content-between align-items-center\">\r\n\r\n                    {currentUser.isLoggedIn === 1 ? (\r\n                      <div>\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={goToDashboard}\r\n                          id=\"kt-profile\"\r\n                          className={`btn btn-warning font-weight-bold px-9 py-4 my-3 mr-20`}>\r\n                          <span>Dashboard</span>\r\n                        </button>\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={Logout}\r\n                          id=\"kt_logout_signout_submit\"\r\n                          className={`btn btn-warning font-weight-bold px-9 py-4 my-3 `}>\r\n                          <span>Logout</span>\r\n                        </button>\r\n                        {/* <AmplifySignOut /> */}\r\n                      </div>\r\n                    ) : (\r\n                      <div>\r\n                        <Link\r\n                          to=\"/auth/forgot-password\"\r\n                          className=\"text-dark-50 text-hover-primary my-3 mr-20\"\r\n                          id=\"kt_login_forgot\">\r\n                          <FormattedMessage id=\"AUTH.GENERAL.FORGOT_BUTTON\" />\r\n                        </Link>\r\n                        <button\r\n                          id=\"kt_login_signin_submit\"\r\n                          type=\"submit\"\r\n                          onSubmit={formik.handleReset}\r\n                          disabled={formik.isSubmitting}\r\n                          className={`btn btn-warning font-weight-bold text-dark px-9 py-4 mr-0 my-3 `}>\r\n                          <span>Login</span>\r\n                          {loading && (\r\n                            <span className=\"ml-3 spinner spinner-white\"></span>\r\n                          )}\r\n                        </button>\r\n\r\n                        <div className=\"position-relative top-0 right-0 text-right mt-5 mb-15 mb-lg-0 flex-column-auto justify-content-center py-5 px-10\">\r\n                          <span className=\"font-weight-bold text-dark-50\">\r\n                            Don't have an account yet?\r\n                          </span>\r\n                          <Link\r\n                            to=\"/auth/profilestepper\"\r\n                            className=\"font-weight-bold ml-2\"\r\n                            id=\"kt_login_signup\">\r\n                            Sign Up!\r\n                          </Link>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </form>\r\n                {/*end::Form*/}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default Login;\r\n"
    },
    {
      "file": "dashboard/src/app/pages/ProfileForm.js",
      "description": "# ProfileForm.js\r\n- ## Example from *ProfileForm.js* using both the Redux *userSlice* to keep state updated, and the RTK Query *apiSlice* to update the database.\r\n\r\n- ## *userSlice:* updateUserState and selectCurrentUser \r\n- ## *apiSlice:* useUpdateCustomerMutation ",
      "line": 29,
      "contents": "import React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Form } from 'react-bootstrap';\r\nimport clsx from 'clsx';\r\nimport {\r\n  makeStyles,\r\n  TextField,\r\n} from '@material-ui/core';\r\nimport { useSnackbar } from 'notistack';\r\nimport Snackbar from 'app/helpers/Snackbar';\r\nimport { CellNumberFormat } from 'app/helpers/Formatters';\r\nimport SVG from 'react-inlinesvg';\r\nimport { initUserErrors } from 'app/helpers/Initializers';\r\nimport {\r\n  FormValidation,\r\n  fieldsValidation\r\n} from 'app/helpers/FormValidation';\r\nimport {\r\n  updateErrorState\r\n} from 'app/redux/errorsSlice';\r\nimport {\r\n  useDispatch,\r\n  useSelector\r\n} from 'react-redux';\r\nimport {\r\n  updateUserState,\r\n  selectCurrentUser,\r\n} from 'app/redux/userSlice';\r\nimport { useUpdateCustomerMutation } from 'app/redux/apiSlice';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  input: {\r\n    border: 'none',\r\n    background: '#f5f5f6',\r\n  },\r\n}));\r\n\r\nexport const ProfileForm = ({ form, handlePassword, isADuplicate }) => {\r\n  const [updateCustomer] = useUpdateCustomerMutation();\r\n  const userState = useSelector(selectCurrentUser);\r\n  const [isValid, setIsValid] = useState(true);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const [pwds, setPwds] = useState({});\r\n  const classes = useStyles();\r\n\r\n  const [newUser, setNewUser] = useState(userState);\r\n  const [newUserErrors, setNewUserErrors] = useState(initUserErrors);\r\n\r\n  const { enqueueSnackbar } = useSnackbar();\r\n\r\n  const handleOnChange = e => {\r\n    let field = e.target.name;\r\n    let value = e.target.value;\r\n    let item = '';\r\n    item += value;\r\n\r\n    if (field === 'pwd' || field === 'pwd2' || field === 'newpwd' || field === 'newpwd2')\r\n    {\r\n      setPwds({\r\n        ...pwds,\r\n        [field]: item\r\n      })\r\n    } else\r\n    {\r\n      setNewUser({\r\n        ...newUser,\r\n        [field]: item\r\n      })\r\n    }\r\n  };\r\n\r\n  //Cell number to be formatted\r\n  const handleCellChange = e => {\r\n    let field = e.target.name;\r\n    let value = e.target.value;\r\n    setNewUser({\r\n      ...newUser,\r\n      [field]: value\r\n    })\r\n  };\r\n\r\n  const handleOnBlur = e => {\r\n    let field = e.target.name;\r\n    let value = e.target.value;\r\n    let required = e.target.required;\r\n\r\n    if (field === 'cell')\r\n    {\r\n      value = newUser.cell;\r\n    }\r\n\r\n    if (value === '' && !required)\r\n    {\r\n      return;\r\n    };\r\n    //fix capitalization\r\n    let val = '';\r\n    if (field === 'firstname' ||\r\n      field === 'lastname' ||\r\n      field === 'city' ||\r\n      field === 'st')\r\n    {\r\n      if (value)\r\n      {\r\n        if (field === 'st')\r\n        {\r\n          val = value.toUpperCase();\r\n        } else\r\n        {\r\n          val = value.toLowerCase();\r\n          let nameArray = val.split(' ');\r\n          val = '';\r\n          nameArray.forEach(function (element) {\r\n            val += element[0].toUpperCase() + element.slice(1) + ' ';\r\n          });\r\n          val = val.trimEnd();\r\n        }\r\n        setNewUser({\r\n          ...newUser,\r\n          [field]: val\r\n        })\r\n      }\r\n    }\r\n\r\n    if (typeof fieldsValidation[field] !== 'undefined')\r\n    {\r\n      let error =\r\n        FormValidation(field, value, fieldsValidation, required, isADuplicate) || '';\r\n      setNewUserErrors({\r\n        ...newUserErrors,\r\n        [field]: error\r\n      })\r\n      dispatch(updateErrorState(newUserErrors));\r\n      if (field === 'pwd2' && newUserErrors.pwd2 === '')\r\n      {\r\n        handlePassword(value);\r\n      }\r\n      if (error !== '')\r\n      {\r\n        setIsValid(false);\r\n      } else\r\n      {\r\n        setIsValid(true);\r\n      }\r\n    }\r\n    dispatch(updateUserState(newUser));\r\n    dispatch(updateErrorState(newUserErrors));\r\n  };\r\n\r\n  const ChangePassword = () => {\r\n    enqueueSnackbar('You must login to change your password.', {\r\n      variant: 'warning',\r\n    });\r\n    history.push({\r\n      pathname: '/password',\r\n    });\r\n  };\r\n\r\n  const goToDashboard = () => {\r\n    history.push({\r\n      pathname: '/dashboard',\r\n    });\r\n  };\r\n\r\n  const SaveChanges = () => {\r\n    if(newUser.email === '' || newUser.cell === '' || newUser.firstname === '' || newUser.lastname === '') {\r\n      let snackType='missingRequiredField'\r\n      enqueueSnackbar(null, {\r\n        persist: false,\r\n        content: key => <Snackbar id={ key } message={ snackType } />\r\n      });\r\n    }\r\n    updateCustomer(newUser).unwrap()\r\n      .then((payload) => {\r\n        //console.log(`updateCustomer fulfilled payload: `, payload)\r\n        dispatch(updateUserState(payload));\r\n        goToDashboard();\r\n      })\r\n      .catch((error) => {\r\n        console.error('updateCustomer rejected error: ', error);\r\n        dispatch(updateErrorState({ cell: 'Duplicate cell' }));\r\n        dispatch(updateErrorState({ email: 'Duplicate email' }));\r\n\r\n        let snackType='signUpError'\r\n        enqueueSnackbar(null, {\r\n          persist: false,\r\n          content: key => <Snackbar id={ key } message={ snackType } />\r\n        });\r\n      });\r\n  }\r\n\r\n  return (\r\n    \r\n    <div className=\"d-flex flex-column align-items-center card-body pt-0\" >\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center mb-2 bg-light-warning rounded p-5\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Font.svg'\r\n            title=\"First Name Required\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg\">\r\n          First Name*\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg  rounded text-dark px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"firstname\"\r\n              required\r\n              value={ newUser.firstname || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.firstname }\r\n              helperText={ newUserErrors.firstname }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Font.svg'\r\n            title=\"Last Name Required\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg\">\r\n          Last Name*\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"lastname\"\r\n              required\r\n              value={ newUser.lastname || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.lastname }\r\n              helperText={ newUserErrors.lastname }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Urgent-mail.svg'\r\n            title=\"Email Required\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg\">\r\n          Email Address*\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg  rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"email\"\r\n              required\r\n              value={ newUser.email || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.email }\r\n              helperText={ newUserErrors.email }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/iPhone-X.svg'\r\n            title=\"Cell Phone Required\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg\">\r\n          Cell Phone*\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg  rounded px-2 py-1 ${classes.input}` }\r\n              name=\"cell\"\r\n              required\r\n              value={ newUser.cell || '' }\r\n              type=\"tel\"\r\n              onChange={ handleCellChange }\r\n              onBlur={ handleOnBlur }\r\n              helperText={ newUserErrors.cell || '' }\r\n              error={ !!newUserErrors.cell }\r\n              InputProps={ {\r\n                inputComponent: CellNumberFormat,\r\n              } }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Other2.svg'\r\n            title=\"Address 1\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark text-hover-primary font-size-lg\">\r\n          Address Line 1\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg  rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"addr1\"\r\n              value={ newUser.addr1 || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.addr1 }\r\n              helperText={ newUserErrors.addr1 }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center mb-2 bg-light-warning rounded p-5\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Other2.svg'\r\n            title=\"Address 2\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg\">\r\n          Address Line 2\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"addr2\"\r\n              value={ newUser.addr2 || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.addr2 }\r\n              helperText={ newUserErrors.addr2 }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Flower3.svg'\r\n            title=\"City\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg \">\r\n          City\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"city\"\r\n              value={ newUser.city || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.city }\r\n              helperText={ newUserErrors.city }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Flag.svg'\r\n            title=\"State\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg mb-1\">\r\n          State\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"st\"\r\n              value={ newUser.st || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.st }\r\n              helperText={ newUserErrors.st }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Mailbox.svg'\r\n            title=\"Zip Code\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg mb-1\">\r\n          Zip Code\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"zip\"\r\n              value={ newUser.zip || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.zip }\r\n              helperText={ newUserErrors.zip }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      { form === 'RegisterStep' && newUser.custid === 0 ?\r\n        <>\r\n          <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n            <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n              <SVG\r\n                src='/media/a4g/Thumbtack.svg'\r\n                title=\"Password Required\"></SVG>\r\n            </span>\r\n            <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg mb-1\">\r\n              Password*\r\n            </div>\r\n            <Form>\r\n              <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n                <TextField\r\n                  className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n\r\n                  required\r\n                  type=\"password\"\r\n                  name=\"pwd\"\r\n                  value={ pwds.pwd || '' }\r\n                  onChange={ handleOnChange }\r\n                  onBlur={ handleOnBlur }\r\n                  error={ !!newUserErrors.pwd }\r\n                  helperText={ newUserErrors.pwd }\r\n                />\r\n              </span>\r\n            </Form>\r\n          </div>\r\n          <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n            <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n              <SVG\r\n                src='/media/a4g/Thumbtack.svg'\r\n                title=\"Password Required\"></SVG>\r\n            </span>\r\n            <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg mb-1\">\r\n              Password*\r\n            </div>\r\n            <Form>\r\n              <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n                <TextField\r\n                  className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n\r\n                  required\r\n                  name=\"pwd2\"\r\n                  type=\"password\"\r\n                  value={ pwds.pwd2 || '' }\r\n                  onChange={ handleOnChange }\r\n                  onBlur={ handleOnBlur }\r\n                  error={ !!newUserErrors.pwd2 }\r\n                  helperText={\r\n                    newUser.pwd2 === newUser.pwd ? newUserErrors.pwd2 : `The passwords do not match`\r\n                  }\r\n                />\r\n              </span>\r\n            </Form>\r\n          </div>\r\n        </>\r\n        :\r\n        <div>\r\n          <div className={ clsx(classes.row, classes.navButtons) }>\r\n            <button\r\n              type=\"button\"\r\n              onClick={ ChangePassword }\r\n              id=\"kt-profile\"\r\n              className={ `btn btn-info font-weight-bold px-9 py-4 my-3` }>\r\n              <span>Change Password</span>\r\n            </button>\r\n          </div>\r\n          <div className={ clsx(classes.row, classes.navButtons)} >\r\n            <button\r\n              type=\"button\"\r\n              onClick={ SaveChanges }\r\n              disabled={ !isValid }\r\n              id=\"kt-profile\"\r\n              className={ `btn btn-warning font-weight-bold px-9 py-4 my-3` }>\r\n              <span>&nbsp;&nbsp;&nbsp;&nbsp;Save Changes&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      }\r\n    </div>\r\n  );\r\n};\r\n"
    },
    {
      "file": "dashboard/src/app/pages/ProfileForm.js",
      "description": "# ProfileForm.js\r\n- ## Update user in Redux userSlice with *dispatch*",
      "line": 148,
      "contents": "import React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Form } from 'react-bootstrap';\r\nimport clsx from 'clsx';\r\nimport {\r\n  makeStyles,\r\n  TextField,\r\n} from '@material-ui/core';\r\nimport { useSnackbar } from 'notistack';\r\nimport Snackbar from 'app/helpers/Snackbar';\r\nimport { CellNumberFormat } from 'app/helpers/Formatters';\r\nimport SVG from 'react-inlinesvg';\r\nimport { initUserErrors } from 'app/helpers/Initializers';\r\nimport {\r\n  FormValidation,\r\n  fieldsValidation\r\n} from 'app/helpers/FormValidation';\r\nimport {\r\n  updateErrorState\r\n} from 'app/redux/errorsSlice';\r\nimport {\r\n  useDispatch,\r\n  useSelector\r\n} from 'react-redux';\r\nimport {\r\n  updateUserState,\r\n  selectCurrentUser,\r\n} from 'app/redux/userSlice';\r\nimport { useUpdateCustomerMutation } from 'app/redux/apiSlice';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  input: {\r\n    border: 'none',\r\n    background: '#f5f5f6',\r\n  },\r\n}));\r\n\r\nexport const ProfileForm = ({ form, handlePassword, isADuplicate }) => {\r\n  const [updateCustomer] = useUpdateCustomerMutation();\r\n  const userState = useSelector(selectCurrentUser);\r\n  const [isValid, setIsValid] = useState(true);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const [pwds, setPwds] = useState({});\r\n  const classes = useStyles();\r\n\r\n  const [newUser, setNewUser] = useState(userState);\r\n  const [newUserErrors, setNewUserErrors] = useState(initUserErrors);\r\n\r\n  const { enqueueSnackbar } = useSnackbar();\r\n\r\n  const handleOnChange = e => {\r\n    let field = e.target.name;\r\n    let value = e.target.value;\r\n    let item = '';\r\n    item += value;\r\n\r\n    if (field === 'pwd' || field === 'pwd2' || field === 'newpwd' || field === 'newpwd2')\r\n    {\r\n      setPwds({\r\n        ...pwds,\r\n        [field]: item\r\n      })\r\n    } else\r\n    {\r\n      setNewUser({\r\n        ...newUser,\r\n        [field]: item\r\n      })\r\n    }\r\n  };\r\n\r\n  //Cell number to be formatted\r\n  const handleCellChange = e => {\r\n    let field = e.target.name;\r\n    let value = e.target.value;\r\n    setNewUser({\r\n      ...newUser,\r\n      [field]: value\r\n    })\r\n  };\r\n\r\n  const handleOnBlur = e => {\r\n    let field = e.target.name;\r\n    let value = e.target.value;\r\n    let required = e.target.required;\r\n\r\n    if (field === 'cell')\r\n    {\r\n      value = newUser.cell;\r\n    }\r\n\r\n    if (value === '' && !required)\r\n    {\r\n      return;\r\n    };\r\n    //fix capitalization\r\n    let val = '';\r\n    if (field === 'firstname' ||\r\n      field === 'lastname' ||\r\n      field === 'city' ||\r\n      field === 'st')\r\n    {\r\n      if (value)\r\n      {\r\n        if (field === 'st')\r\n        {\r\n          val = value.toUpperCase();\r\n        } else\r\n        {\r\n          val = value.toLowerCase();\r\n          let nameArray = val.split(' ');\r\n          val = '';\r\n          nameArray.forEach(function (element) {\r\n            val += element[0].toUpperCase() + element.slice(1) + ' ';\r\n          });\r\n          val = val.trimEnd();\r\n        }\r\n        setNewUser({\r\n          ...newUser,\r\n          [field]: val\r\n        })\r\n      }\r\n    }\r\n\r\n    if (typeof fieldsValidation[field] !== 'undefined')\r\n    {\r\n      let error =\r\n        FormValidation(field, value, fieldsValidation, required, isADuplicate) || '';\r\n      setNewUserErrors({\r\n        ...newUserErrors,\r\n        [field]: error\r\n      })\r\n      dispatch(updateErrorState(newUserErrors));\r\n      if (field === 'pwd2' && newUserErrors.pwd2 === '')\r\n      {\r\n        handlePassword(value);\r\n      }\r\n      if (error !== '')\r\n      {\r\n        setIsValid(false);\r\n      } else\r\n      {\r\n        setIsValid(true);\r\n      }\r\n    }\r\n    dispatch(updateUserState(newUser));\r\n    dispatch(updateErrorState(newUserErrors));\r\n  };\r\n\r\n  const ChangePassword = () => {\r\n    enqueueSnackbar('You must login to change your password.', {\r\n      variant: 'warning',\r\n    });\r\n    history.push({\r\n      pathname: '/password',\r\n    });\r\n  };\r\n\r\n  const goToDashboard = () => {\r\n    history.push({\r\n      pathname: '/dashboard',\r\n    });\r\n  };\r\n\r\n  const SaveChanges = () => {\r\n    if(newUser.email === '' || newUser.cell === '' || newUser.firstname === '' || newUser.lastname === '') {\r\n      let snackType='missingRequiredField'\r\n      enqueueSnackbar(null, {\r\n        persist: false,\r\n        content: key => <Snackbar id={ key } message={ snackType } />\r\n      });\r\n    }\r\n    updateCustomer(newUser).unwrap()\r\n      .then((payload) => {\r\n        //console.log(`updateCustomer fulfilled payload: `, payload)\r\n        dispatch(updateUserState(payload));\r\n        goToDashboard();\r\n      })\r\n      .catch((error) => {\r\n        console.error('updateCustomer rejected error: ', error);\r\n        dispatch(updateErrorState({ cell: 'Duplicate cell' }));\r\n        dispatch(updateErrorState({ email: 'Duplicate email' }));\r\n\r\n        let snackType='signUpError'\r\n        enqueueSnackbar(null, {\r\n          persist: false,\r\n          content: key => <Snackbar id={ key } message={ snackType } />\r\n        });\r\n      });\r\n  }\r\n\r\n  return (\r\n    \r\n    <div className=\"d-flex flex-column align-items-center card-body pt-0\" >\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center mb-2 bg-light-warning rounded p-5\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Font.svg'\r\n            title=\"First Name Required\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg\">\r\n          First Name*\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg  rounded text-dark px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"firstname\"\r\n              required\r\n              value={ newUser.firstname || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.firstname }\r\n              helperText={ newUserErrors.firstname }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Font.svg'\r\n            title=\"Last Name Required\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg\">\r\n          Last Name*\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"lastname\"\r\n              required\r\n              value={ newUser.lastname || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.lastname }\r\n              helperText={ newUserErrors.lastname }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Urgent-mail.svg'\r\n            title=\"Email Required\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg\">\r\n          Email Address*\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg  rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"email\"\r\n              required\r\n              value={ newUser.email || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.email }\r\n              helperText={ newUserErrors.email }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/iPhone-X.svg'\r\n            title=\"Cell Phone Required\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg\">\r\n          Cell Phone*\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg  rounded px-2 py-1 ${classes.input}` }\r\n              name=\"cell\"\r\n              required\r\n              value={ newUser.cell || '' }\r\n              type=\"tel\"\r\n              onChange={ handleCellChange }\r\n              onBlur={ handleOnBlur }\r\n              helperText={ newUserErrors.cell || '' }\r\n              error={ !!newUserErrors.cell }\r\n              InputProps={ {\r\n                inputComponent: CellNumberFormat,\r\n              } }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Other2.svg'\r\n            title=\"Address 1\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark text-hover-primary font-size-lg\">\r\n          Address Line 1\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg  rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"addr1\"\r\n              value={ newUser.addr1 || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.addr1 }\r\n              helperText={ newUserErrors.addr1 }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center mb-2 bg-light-warning rounded p-5\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Other2.svg'\r\n            title=\"Address 2\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg\">\r\n          Address Line 2\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"addr2\"\r\n              value={ newUser.addr2 || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.addr2 }\r\n              helperText={ newUserErrors.addr2 }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Flower3.svg'\r\n            title=\"City\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg \">\r\n          City\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"city\"\r\n              value={ newUser.city || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.city }\r\n              helperText={ newUserErrors.city }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Flag.svg'\r\n            title=\"State\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg mb-1\">\r\n          State\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"st\"\r\n              value={ newUser.st || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.st }\r\n              helperText={ newUserErrors.st }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Mailbox.svg'\r\n            title=\"Zip Code\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg mb-1\">\r\n          Zip Code\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"zip\"\r\n              value={ newUser.zip || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.zip }\r\n              helperText={ newUserErrors.zip }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      { form === 'RegisterStep' && newUser.custid === 0 ?\r\n        <>\r\n          <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n            <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n              <SVG\r\n                src='/media/a4g/Thumbtack.svg'\r\n                title=\"Password Required\"></SVG>\r\n            </span>\r\n            <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg mb-1\">\r\n              Password*\r\n            </div>\r\n            <Form>\r\n              <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n                <TextField\r\n                  className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n\r\n                  required\r\n                  type=\"password\"\r\n                  name=\"pwd\"\r\n                  value={ pwds.pwd || '' }\r\n                  onChange={ handleOnChange }\r\n                  onBlur={ handleOnBlur }\r\n                  error={ !!newUserErrors.pwd }\r\n                  helperText={ newUserErrors.pwd }\r\n                />\r\n              </span>\r\n            </Form>\r\n          </div>\r\n          <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n            <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n              <SVG\r\n                src='/media/a4g/Thumbtack.svg'\r\n                title=\"Password Required\"></SVG>\r\n            </span>\r\n            <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg mb-1\">\r\n              Password*\r\n            </div>\r\n            <Form>\r\n              <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n                <TextField\r\n                  className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n\r\n                  required\r\n                  name=\"pwd2\"\r\n                  type=\"password\"\r\n                  value={ pwds.pwd2 || '' }\r\n                  onChange={ handleOnChange }\r\n                  onBlur={ handleOnBlur }\r\n                  error={ !!newUserErrors.pwd2 }\r\n                  helperText={\r\n                    newUser.pwd2 === newUser.pwd ? newUserErrors.pwd2 : `The passwords do not match`\r\n                  }\r\n                />\r\n              </span>\r\n            </Form>\r\n          </div>\r\n        </>\r\n        :\r\n        <div>\r\n          <div className={ clsx(classes.row, classes.navButtons) }>\r\n            <button\r\n              type=\"button\"\r\n              onClick={ ChangePassword }\r\n              id=\"kt-profile\"\r\n              className={ `btn btn-info font-weight-bold px-9 py-4 my-3` }>\r\n              <span>Change Password</span>\r\n            </button>\r\n          </div>\r\n          <div className={ clsx(classes.row, classes.navButtons)} >\r\n            <button\r\n              type=\"button\"\r\n              onClick={ SaveChanges }\r\n              disabled={ !isValid }\r\n              id=\"kt-profile\"\r\n              className={ `btn btn-warning font-weight-bold px-9 py-4 my-3` }>\r\n              <span>&nbsp;&nbsp;&nbsp;&nbsp;Save Changes&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      }\r\n    </div>\r\n  );\r\n};\r\n"
    },
    {
      "file": "dashboard/src/app/pages/ProfileForm.js",
      "description": "# ProfileForm.js\r\n- ## Define *updateCustomer* as a call to *useUpdateCustomerMutation* in our apiSlice.",
      "line": 40,
      "selection": {
        "start": {
          "line": 40,
          "character": 10
        },
        "end": {
          "line": 40,
          "character": 24
        }
      },
      "contents": "import React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Form } from 'react-bootstrap';\r\nimport clsx from 'clsx';\r\nimport {\r\n  makeStyles,\r\n  TextField,\r\n} from '@material-ui/core';\r\nimport { useSnackbar } from 'notistack';\r\nimport Snackbar from 'app/helpers/Snackbar';\r\nimport { CellNumberFormat } from 'app/helpers/Formatters';\r\nimport SVG from 'react-inlinesvg';\r\nimport { initUserErrors } from 'app/helpers/Initializers';\r\nimport {\r\n  FormValidation,\r\n  fieldsValidation\r\n} from 'app/helpers/FormValidation';\r\nimport {\r\n  updateErrorState\r\n} from 'app/redux/errorsSlice';\r\nimport {\r\n  useDispatch,\r\n  useSelector\r\n} from 'react-redux';\r\nimport {\r\n  updateUserState,\r\n  selectCurrentUser,\r\n} from 'app/redux/userSlice';\r\nimport { useUpdateCustomerMutation } from 'app/redux/apiSlice';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  input: {\r\n    border: 'none',\r\n    background: '#f5f5f6',\r\n  },\r\n}));\r\n\r\nexport const ProfileForm = ({ form, handlePassword, isADuplicate }) => {\r\n  const [updateCustomer] = useUpdateCustomerMutation();\r\n  const userState = useSelector(selectCurrentUser);\r\n  const [isValid, setIsValid] = useState(true);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const [pwds, setPwds] = useState({});\r\n  const classes = useStyles();\r\n\r\n  const [newUser, setNewUser] = useState(userState);\r\n  const [newUserErrors, setNewUserErrors] = useState(initUserErrors);\r\n\r\n  const { enqueueSnackbar } = useSnackbar();\r\n\r\n  const handleOnChange = e => {\r\n    let field = e.target.name;\r\n    let value = e.target.value;\r\n    let item = '';\r\n    item += value;\r\n\r\n    if (field === 'pwd' || field === 'pwd2' || field === 'newpwd' || field === 'newpwd2')\r\n    {\r\n      setPwds({\r\n        ...pwds,\r\n        [field]: item\r\n      })\r\n    } else\r\n    {\r\n      setNewUser({\r\n        ...newUser,\r\n        [field]: item\r\n      })\r\n    }\r\n  };\r\n\r\n  //Cell number to be formatted\r\n  const handleCellChange = e => {\r\n    let field = e.target.name;\r\n    let value = e.target.value;\r\n    setNewUser({\r\n      ...newUser,\r\n      [field]: value\r\n    })\r\n  };\r\n\r\n  const handleOnBlur = e => {\r\n    let field = e.target.name;\r\n    let value = e.target.value;\r\n    let required = e.target.required;\r\n\r\n    if (field === 'cell')\r\n    {\r\n      value = newUser.cell;\r\n    }\r\n\r\n    if (value === '' && !required)\r\n    {\r\n      return;\r\n    };\r\n    //fix capitalization\r\n    let val = '';\r\n    if (field === 'firstname' ||\r\n      field === 'lastname' ||\r\n      field === 'city' ||\r\n      field === 'st')\r\n    {\r\n      if (value)\r\n      {\r\n        if (field === 'st')\r\n        {\r\n          val = value.toUpperCase();\r\n        } else\r\n        {\r\n          val = value.toLowerCase();\r\n          let nameArray = val.split(' ');\r\n          val = '';\r\n          nameArray.forEach(function (element) {\r\n            val += element[0].toUpperCase() + element.slice(1) + ' ';\r\n          });\r\n          val = val.trimEnd();\r\n        }\r\n        setNewUser({\r\n          ...newUser,\r\n          [field]: val\r\n        })\r\n      }\r\n    }\r\n\r\n    if (typeof fieldsValidation[field] !== 'undefined')\r\n    {\r\n      let error =\r\n        FormValidation(field, value, fieldsValidation, required, isADuplicate) || '';\r\n      setNewUserErrors({\r\n        ...newUserErrors,\r\n        [field]: error\r\n      })\r\n      dispatch(updateErrorState(newUserErrors));\r\n      if (field === 'pwd2' && newUserErrors.pwd2 === '')\r\n      {\r\n        handlePassword(value);\r\n      }\r\n      if (error !== '')\r\n      {\r\n        setIsValid(false);\r\n      } else\r\n      {\r\n        setIsValid(true);\r\n      }\r\n    }\r\n    dispatch(updateUserState(newUser));\r\n    dispatch(updateErrorState(newUserErrors));\r\n  };\r\n\r\n  const ChangePassword = () => {\r\n    enqueueSnackbar('You must login to change your password.', {\r\n      variant: 'warning',\r\n    });\r\n    history.push({\r\n      pathname: '/password',\r\n    });\r\n  };\r\n\r\n  const goToDashboard = () => {\r\n    history.push({\r\n      pathname: '/dashboard',\r\n    });\r\n  };\r\n\r\n  const SaveChanges = () => {\r\n    if(newUser.email === '' || newUser.cell === '' || newUser.firstname === '' || newUser.lastname === '') {\r\n      let snackType='missingRequiredField'\r\n      enqueueSnackbar(null, {\r\n        persist: false,\r\n        content: key => <Snackbar id={ key } message={ snackType } />\r\n      });\r\n    }\r\n    updateCustomer(newUser).unwrap()\r\n      .then((payload) => {\r\n        //console.log(`updateCustomer fulfilled payload: `, payload)\r\n        dispatch(updateUserState(payload));\r\n        goToDashboard();\r\n      })\r\n      .catch((error) => {\r\n        console.error('updateCustomer rejected error: ', error);\r\n        dispatch(updateErrorState({ cell: 'Duplicate cell' }));\r\n        dispatch(updateErrorState({ email: 'Duplicate email' }));\r\n\r\n        let snackType='signUpError'\r\n        enqueueSnackbar(null, {\r\n          persist: false,\r\n          content: key => <Snackbar id={ key } message={ snackType } />\r\n        });\r\n      });\r\n  }\r\n\r\n  return (\r\n    \r\n    <div className=\"d-flex flex-column align-items-center card-body pt-0\" >\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center mb-2 bg-light-warning rounded p-5\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Font.svg'\r\n            title=\"First Name Required\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg\">\r\n          First Name*\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg  rounded text-dark px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"firstname\"\r\n              required\r\n              value={ newUser.firstname || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.firstname }\r\n              helperText={ newUserErrors.firstname }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Font.svg'\r\n            title=\"Last Name Required\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg\">\r\n          Last Name*\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"lastname\"\r\n              required\r\n              value={ newUser.lastname || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.lastname }\r\n              helperText={ newUserErrors.lastname }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Urgent-mail.svg'\r\n            title=\"Email Required\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg\">\r\n          Email Address*\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg  rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"email\"\r\n              required\r\n              value={ newUser.email || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.email }\r\n              helperText={ newUserErrors.email }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/iPhone-X.svg'\r\n            title=\"Cell Phone Required\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg\">\r\n          Cell Phone*\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg  rounded px-2 py-1 ${classes.input}` }\r\n              name=\"cell\"\r\n              required\r\n              value={ newUser.cell || '' }\r\n              type=\"tel\"\r\n              onChange={ handleCellChange }\r\n              onBlur={ handleOnBlur }\r\n              helperText={ newUserErrors.cell || '' }\r\n              error={ !!newUserErrors.cell }\r\n              InputProps={ {\r\n                inputComponent: CellNumberFormat,\r\n              } }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Other2.svg'\r\n            title=\"Address 1\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark text-hover-primary font-size-lg\">\r\n          Address Line 1\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg  rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"addr1\"\r\n              value={ newUser.addr1 || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.addr1 }\r\n              helperText={ newUserErrors.addr1 }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center mb-2 bg-light-warning rounded p-5\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Other2.svg'\r\n            title=\"Address 2\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg\">\r\n          Address Line 2\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"addr2\"\r\n              value={ newUser.addr2 || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.addr2 }\r\n              helperText={ newUserErrors.addr2 }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Flower3.svg'\r\n            title=\"City\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg \">\r\n          City\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"city\"\r\n              value={ newUser.city || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.city }\r\n              helperText={ newUserErrors.city }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Flag.svg'\r\n            title=\"State\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg mb-1\">\r\n          State\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"st\"\r\n              value={ newUser.st || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.st }\r\n              helperText={ newUserErrors.st }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Mailbox.svg'\r\n            title=\"Zip Code\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg mb-1\">\r\n          Zip Code\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"zip\"\r\n              value={ newUser.zip || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.zip }\r\n              helperText={ newUserErrors.zip }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      { form === 'RegisterStep' && newUser.custid === 0 ?\r\n        <>\r\n          <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n            <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n              <SVG\r\n                src='/media/a4g/Thumbtack.svg'\r\n                title=\"Password Required\"></SVG>\r\n            </span>\r\n            <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg mb-1\">\r\n              Password*\r\n            </div>\r\n            <Form>\r\n              <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n                <TextField\r\n                  className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n\r\n                  required\r\n                  type=\"password\"\r\n                  name=\"pwd\"\r\n                  value={ pwds.pwd || '' }\r\n                  onChange={ handleOnChange }\r\n                  onBlur={ handleOnBlur }\r\n                  error={ !!newUserErrors.pwd }\r\n                  helperText={ newUserErrors.pwd }\r\n                />\r\n              </span>\r\n            </Form>\r\n          </div>\r\n          <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n            <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n              <SVG\r\n                src='/media/a4g/Thumbtack.svg'\r\n                title=\"Password Required\"></SVG>\r\n            </span>\r\n            <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg mb-1\">\r\n              Password*\r\n            </div>\r\n            <Form>\r\n              <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n                <TextField\r\n                  className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n\r\n                  required\r\n                  name=\"pwd2\"\r\n                  type=\"password\"\r\n                  value={ pwds.pwd2 || '' }\r\n                  onChange={ handleOnChange }\r\n                  onBlur={ handleOnBlur }\r\n                  error={ !!newUserErrors.pwd2 }\r\n                  helperText={\r\n                    newUser.pwd2 === newUser.pwd ? newUserErrors.pwd2 : `The passwords do not match`\r\n                  }\r\n                />\r\n              </span>\r\n            </Form>\r\n          </div>\r\n        </>\r\n        :\r\n        <div>\r\n          <div className={ clsx(classes.row, classes.navButtons) }>\r\n            <button\r\n              type=\"button\"\r\n              onClick={ ChangePassword }\r\n              id=\"kt-profile\"\r\n              className={ `btn btn-info font-weight-bold px-9 py-4 my-3` }>\r\n              <span>Change Password</span>\r\n            </button>\r\n          </div>\r\n          <div className={ clsx(classes.row, classes.navButtons)} >\r\n            <button\r\n              type=\"button\"\r\n              onClick={ SaveChanges }\r\n              disabled={ !isValid }\r\n              id=\"kt-profile\"\r\n              className={ `btn btn-warning font-weight-bold px-9 py-4 my-3` }>\r\n              <span>&nbsp;&nbsp;&nbsp;&nbsp;Save Changes&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      }\r\n    </div>\r\n  );\r\n};\r\n"
    },
    {
      "file": "dashboard/src/app/pages/ProfileForm.js",
      "description": "# ProfileForm.js\r\n- ## *updateCustomer* with *newUser* object. This is a database call through *apiSlice*.\r\n- ## *.unwrap()* gives you immediate access to the error or success payload after a mutation.\r\n- ## *payload* is the response from *apiSlice* not the response from *fetch*.\r\n- ## Now, update the *userSlice* in Redux with the *payload* we got from *apiSlice*.",
      "line": 180,
      "selection": {
        "start": {
          "line": 175,
          "character": 5
        },
        "end": {
          "line": 175,
          "character": 19
        }
      },
      "contents": "import React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Form } from 'react-bootstrap';\r\nimport clsx from 'clsx';\r\nimport {\r\n  makeStyles,\r\n  TextField,\r\n} from '@material-ui/core';\r\nimport { useSnackbar } from 'notistack';\r\nimport Snackbar from 'app/helpers/Snackbar';\r\nimport { CellNumberFormat } from 'app/helpers/Formatters';\r\nimport SVG from 'react-inlinesvg';\r\nimport { initUserErrors } from 'app/helpers/Initializers';\r\nimport {\r\n  FormValidation,\r\n  fieldsValidation\r\n} from 'app/helpers/FormValidation';\r\nimport {\r\n  updateErrorState\r\n} from 'app/redux/errorsSlice';\r\nimport {\r\n  useDispatch,\r\n  useSelector\r\n} from 'react-redux';\r\nimport {\r\n  updateUserState,\r\n  selectCurrentUser,\r\n} from 'app/redux/userSlice';\r\nimport { useUpdateCustomerMutation } from 'app/redux/apiSlice';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  input: {\r\n    border: 'none',\r\n    background: '#f5f5f6',\r\n  },\r\n}));\r\n\r\nexport const ProfileForm = ({ form, handlePassword, isADuplicate }) => {\r\n  const [updateCustomer] = useUpdateCustomerMutation();\r\n  const userState = useSelector(selectCurrentUser);\r\n  const [isValid, setIsValid] = useState(true);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const [pwds, setPwds] = useState({});\r\n  const classes = useStyles();\r\n\r\n  const [newUser, setNewUser] = useState(userState);\r\n  const [newUserErrors, setNewUserErrors] = useState(initUserErrors);\r\n\r\n  const { enqueueSnackbar } = useSnackbar();\r\n\r\n  const handleOnChange = e => {\r\n    let field = e.target.name;\r\n    let value = e.target.value;\r\n    let item = '';\r\n    item += value;\r\n\r\n    if (field === 'pwd' || field === 'pwd2' || field === 'newpwd' || field === 'newpwd2')\r\n    {\r\n      setPwds({\r\n        ...pwds,\r\n        [field]: item\r\n      })\r\n    } else\r\n    {\r\n      setNewUser({\r\n        ...newUser,\r\n        [field]: item\r\n      })\r\n    }\r\n  };\r\n\r\n  //Cell number to be formatted\r\n  const handleCellChange = e => {\r\n    let field = e.target.name;\r\n    let value = e.target.value;\r\n    setNewUser({\r\n      ...newUser,\r\n      [field]: value\r\n    })\r\n  };\r\n\r\n  const handleOnBlur = e => {\r\n    let field = e.target.name;\r\n    let value = e.target.value;\r\n    let required = e.target.required;\r\n\r\n    if (field === 'cell')\r\n    {\r\n      value = newUser.cell;\r\n    }\r\n\r\n    if (value === '' && !required)\r\n    {\r\n      return;\r\n    };\r\n    //fix capitalization\r\n    let val = '';\r\n    if (field === 'firstname' ||\r\n      field === 'lastname' ||\r\n      field === 'city' ||\r\n      field === 'st')\r\n    {\r\n      if (value)\r\n      {\r\n        if (field === 'st')\r\n        {\r\n          val = value.toUpperCase();\r\n        } else\r\n        {\r\n          val = value.toLowerCase();\r\n          let nameArray = val.split(' ');\r\n          val = '';\r\n          nameArray.forEach(function (element) {\r\n            val += element[0].toUpperCase() + element.slice(1) + ' ';\r\n          });\r\n          val = val.trimEnd();\r\n        }\r\n        setNewUser({\r\n          ...newUser,\r\n          [field]: val\r\n        })\r\n      }\r\n    }\r\n\r\n    if (typeof fieldsValidation[field] !== 'undefined')\r\n    {\r\n      let error =\r\n        FormValidation(field, value, fieldsValidation, required, isADuplicate) || '';\r\n      setNewUserErrors({\r\n        ...newUserErrors,\r\n        [field]: error\r\n      })\r\n      dispatch(updateErrorState(newUserErrors));\r\n      if (field === 'pwd2' && newUserErrors.pwd2 === '')\r\n      {\r\n        handlePassword(value);\r\n      }\r\n      if (error !== '')\r\n      {\r\n        setIsValid(false);\r\n      } else\r\n      {\r\n        setIsValid(true);\r\n      }\r\n    }\r\n    dispatch(updateUserState(newUser));\r\n    dispatch(updateErrorState(newUserErrors));\r\n  };\r\n\r\n  const ChangePassword = () => {\r\n    enqueueSnackbar('You must login to change your password.', {\r\n      variant: 'warning',\r\n    });\r\n    history.push({\r\n      pathname: '/password',\r\n    });\r\n  };\r\n\r\n  const goToDashboard = () => {\r\n    history.push({\r\n      pathname: '/dashboard',\r\n    });\r\n  };\r\n\r\n  const SaveChanges = () => {\r\n    if(newUser.email === '' || newUser.cell === '' || newUser.firstname === '' || newUser.lastname === '') {\r\n      let snackType='missingRequiredField'\r\n      enqueueSnackbar(null, {\r\n        persist: false,\r\n        content: key => <Snackbar id={ key } message={ snackType } />\r\n      });\r\n    }\r\n    updateCustomer(newUser).unwrap()\r\n      .then((payload) => {\r\n        //console.log(`updateCustomer fulfilled payload: `, payload)\r\n        dispatch(updateUserState(payload));\r\n        goToDashboard();\r\n      })\r\n      .catch((error) => {\r\n        console.error('updateCustomer rejected error: ', error);\r\n        dispatch(updateErrorState({ cell: 'Duplicate cell' }));\r\n        dispatch(updateErrorState({ email: 'Duplicate email' }));\r\n\r\n        let snackType='signUpError'\r\n        enqueueSnackbar(null, {\r\n          persist: false,\r\n          content: key => <Snackbar id={ key } message={ snackType } />\r\n        });\r\n      });\r\n  }\r\n\r\n  return (\r\n    \r\n    <div className=\"d-flex flex-column align-items-center card-body pt-0\" >\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center mb-2 bg-light-warning rounded p-5\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Font.svg'\r\n            title=\"First Name Required\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg\">\r\n          First Name*\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg  rounded text-dark px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"firstname\"\r\n              required\r\n              value={ newUser.firstname || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.firstname }\r\n              helperText={ newUserErrors.firstname }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Font.svg'\r\n            title=\"Last Name Required\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg\">\r\n          Last Name*\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"lastname\"\r\n              required\r\n              value={ newUser.lastname || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.lastname }\r\n              helperText={ newUserErrors.lastname }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Urgent-mail.svg'\r\n            title=\"Email Required\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg\">\r\n          Email Address*\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg  rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"email\"\r\n              required\r\n              value={ newUser.email || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.email }\r\n              helperText={ newUserErrors.email }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/iPhone-X.svg'\r\n            title=\"Cell Phone Required\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg\">\r\n          Cell Phone*\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg  rounded px-2 py-1 ${classes.input}` }\r\n              name=\"cell\"\r\n              required\r\n              value={ newUser.cell || '' }\r\n              type=\"tel\"\r\n              onChange={ handleCellChange }\r\n              onBlur={ handleOnBlur }\r\n              helperText={ newUserErrors.cell || '' }\r\n              error={ !!newUserErrors.cell }\r\n              InputProps={ {\r\n                inputComponent: CellNumberFormat,\r\n              } }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Other2.svg'\r\n            title=\"Address 1\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark text-hover-primary font-size-lg\">\r\n          Address Line 1\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg  rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"addr1\"\r\n              value={ newUser.addr1 || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.addr1 }\r\n              helperText={ newUserErrors.addr1 }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center mb-2 bg-light-warning rounded p-5\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Other2.svg'\r\n            title=\"Address 2\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg\">\r\n          Address Line 2\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"addr2\"\r\n              value={ newUser.addr2 || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.addr2 }\r\n              helperText={ newUserErrors.addr2 }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Flower3.svg'\r\n            title=\"City\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg \">\r\n          City\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"city\"\r\n              value={ newUser.city || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.city }\r\n              helperText={ newUserErrors.city }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Flag.svg'\r\n            title=\"State\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg mb-1\">\r\n          State\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"st\"\r\n              value={ newUser.st || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.st }\r\n              helperText={ newUserErrors.st }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n        <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n          <SVG\r\n            src='/media/a4g/Mailbox.svg'\r\n            title=\"Zip Code\"></SVG>\r\n        </span>\r\n        <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg mb-1\">\r\n          Zip Code\r\n        </div>\r\n        <Form>\r\n          <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n            <TextField\r\n              className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n              type=\"text\"\r\n              name=\"zip\"\r\n              value={ newUser.zip || '' }\r\n              onChange={ handleOnChange }\r\n              onBlur={ handleOnBlur }\r\n              error={ !!newUserErrors.zip }\r\n              helperText={ newUserErrors.zip }\r\n            />\r\n          </span>\r\n        </Form>\r\n      </div>\r\n\r\n      { form === 'RegisterStep' && newUser.custid === 0 ?\r\n        <>\r\n          <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n            <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n              <SVG\r\n                src='/media/a4g/Thumbtack.svg'\r\n                title=\"Password Required\"></SVG>\r\n            </span>\r\n            <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg mb-1\">\r\n              Password*\r\n            </div>\r\n            <Form>\r\n              <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n                <TextField\r\n                  className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n\r\n                  required\r\n                  type=\"password\"\r\n                  name=\"pwd\"\r\n                  value={ pwds.pwd || '' }\r\n                  onChange={ handleOnChange }\r\n                  onBlur={ handleOnBlur }\r\n                  error={ !!newUserErrors.pwd }\r\n                  helperText={ newUserErrors.pwd }\r\n                />\r\n              </span>\r\n            </Form>\r\n          </div>\r\n          <div style={{width: '400px'}} className=\"d-flex align-items-center bg-light-warning rounded p-5 mb-2\">\r\n            <span className=\"svg-icon svg-icon-dark mr-5 svg-icon-lg\">\r\n              <SVG\r\n                src='/media/a4g/Thumbtack.svg'\r\n                title=\"Password Required\"></SVG>\r\n            </span>\r\n            <div className=\"d-flex flex-column flex-grow-1 mr-2 font-weight-bold text-dark font-size-lg mb-1\">\r\n              Password*\r\n            </div>\r\n            <Form>\r\n              <span className=\"font-weight-bold text-dark-75 py-1 font-size-lg\">\r\n                <TextField\r\n                  className={ `font-weight-bold font-size-lg rounded px-2 py-1 ${classes.input}` }\r\n\r\n                  required\r\n                  name=\"pwd2\"\r\n                  type=\"password\"\r\n                  value={ pwds.pwd2 || '' }\r\n                  onChange={ handleOnChange }\r\n                  onBlur={ handleOnBlur }\r\n                  error={ !!newUserErrors.pwd2 }\r\n                  helperText={\r\n                    newUser.pwd2 === newUser.pwd ? newUserErrors.pwd2 : `The passwords do not match`\r\n                  }\r\n                />\r\n              </span>\r\n            </Form>\r\n          </div>\r\n        </>\r\n        :\r\n        <div>\r\n          <div className={ clsx(classes.row, classes.navButtons) }>\r\n            <button\r\n              type=\"button\"\r\n              onClick={ ChangePassword }\r\n              id=\"kt-profile\"\r\n              className={ `btn btn-info font-weight-bold px-9 py-4 my-3` }>\r\n              <span>Change Password</span>\r\n            </button>\r\n          </div>\r\n          <div className={ clsx(classes.row, classes.navButtons)} >\r\n            <button\r\n              type=\"button\"\r\n              onClick={ SaveChanges }\r\n              disabled={ !isValid }\r\n              id=\"kt-profile\"\r\n              className={ `btn btn-warning font-weight-bold px-9 py-4 my-3` }>\r\n              <span>&nbsp;&nbsp;&nbsp;&nbsp;Save Changes&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      }\r\n    </div>\r\n  );\r\n};\r\n"
    }
  ]
}